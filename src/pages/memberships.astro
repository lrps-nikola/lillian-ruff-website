---
import Layout from "@/layouts/Layout.astro";
import Container from "@/components/container.astro";
import { Icon } from "astro-icon/components";

// Dog breeds list from MoeGo
const dogBreeds = [
  "Affenpinscher", "Afghan Hound", "Airedale Terrier", "Akbash Dog", "Akita Inu",
  "Alano Espanol", "Alapaha Blue Blood Bulldog", "Alaskan Husky", "Alaskan Klee Kai",
  "Alaskan Malamute", "Alopekis", "Alpine Dachsbracke", "American Alsatian",
  "American Bull Molosser", "American Bulldog", "American Bullnese", "American Coonhound",
  "American Eskimo Dog", "American Foxhound", "American Hairless Terrier",
  "American Indian Dog", "American Lo Sze Pugg", "American Mastiff",
  "American Mastiff Panja", "American Pit Bull Terrier", "American Staffordshire Terrier",
  "American Water Spaniel", "American White Shepherd", "Appenzell Mountain Dog",
  "Atlas Terrier", "Aussiedoodle (h)", "Australian Bulldog", "Australian Cattle Dog",
  "Australian Kelpie", "Australian Labradoodle", "Australian Shepherd",
  "Australian Stumpy Tail Cattle Dog", "Australian Terrier", "Austrian Shorthaired Pinscher",
  "Azawakh Hound", "Banter Bulldogge", "Barbet", "Basenji", "Basset Artesian Normand",
  "Basset Hound", "Beagle", "Bearded Collie", "Beauceron", "Bedlington Terrier",
  "Belgian Groenendael", "Belgian Laekenois", "Belgian Malinois", "Belgian Mastiff",
  "Belgian Tervuren", "Belgrade Terrier", "Bergamasco Sheepdog", "Berger De Picard",
  "Bernedoodle", "Bernese Mountain Dog", "Bich Poo (h)", "Bichon Frise", "Biewer",
  "Black Mouth Cur", "Black Russian Terrier", "Bloodhound", "Blue Lacy",
  "Bluetick Coonhound", "Boerboel", "Bohemian Shepherd", "Bolognese", "Border Collie",
  "Border Terrier", "Borzoi", "Boston Terrier", "Bouvier des Flandres", "Boxer",
  "Boykin Spaniel", "Braque du Bourbonnais", "Brazilian Terrier", "Briard",
  "Brittany Spaniel", "Broholmer", "Brussels Griffon", "Bukovina Sheepdog",
  "Bull Terrier", "Bullmastiff", "Cairn Terrier", "Canaan Dog", "Canary Dog",
  "Cane Corso Italiano", "Canis Panther", "Canoe Dog", "Cao da Serra de Aires",
  "Cao de Castro Laboreiro", "Cao de Fila de Sao Miguel", "Cao Dos Mourey",
  "Caravan Hound", "Cardigan Welsh Corgi", "Carin Terrier", "Carlin Pinscher",
  "Carolina Dog", "Carpathian Sheepdog", "Catahoula Bulldog", "Caucasian Ovtcharka",
  "Cavachon (h)", "Cavalier King Charles Spaniel", "Cavapoo (h)",
  "Central Asian Ovtcharka", "Cesky Fousek", "Cesky Terrier",
  "Chesapeake Bay Retriever", "Chihuahua", "Chinese Chongqing Dog", "Chinese Crested",
  "Chinese Imperial Dog", "Chinook", "ChiPoo (h)", "Chorkie (h)", "Chow Chow",
  "Clumber Spaniel", "Cockalier (h)", "Cockapoo", "Cocker Spaniel", "Collie",
  "Coton De Tulear", "Cretan Hound", "Croatian Sheepdog", "Curly Coated Retriever",
  "Czechoslovakian Wolfdog", "Dachshund", "Dakotah Shepherd", "Dalmatian",
  "Dandie Dinmont Terrier", "Danish Broholmer", "Danish Swedish Farm Dog",
  "Daxie Terrier", "Deutscher Wachtelhund", "Doberman Pinscher", "Dogo Argentino",
  "Dogue Brasileiro", "Dogue de Bordeaux", "Dorkie", "Dorset Olde Tyme Bulldogge",
  "Drever", "Dutch Shepherd", "Dutch Smoushond", "East European Shepherd",
  "English Bulldog", "English Cocker Spaniel", "English Coonhound", "English Foxhound",
  "English Setter", "English Shepherd", "English Springer Spaniel", "English Toy Spaniel",
  "Entlebucher Sennenhund", "Estonian Hound", "Eurasier", "Field Spaniel",
  "Fila Brasileiro", "Finnish Hound", "Finnish Spitz", "Flat Coated Retriever",
  "French Brittany", "French Bulldog", "French Spaniel", "Galgo Espanol",
  "German Hunt Terrier", "German Longhaired Pointer", "German Pinscher",
  "German Sheeppoodle", "German Shepherd", "German Shorthaired Pointer", "German Spitz",
  "German Wirehaired Pointer", "Giant Maso Mastiff", "Giant Schnauzer",
  "Glen of Imaal Terrier", "Goberian", "Golden Retriever", "Goldendoodle (h)",
  "Gordon Setter", "Great Dane", "Great Pyrenees", "Greater Swiss Mountain Dog",
  "Greenland Dog", "Greyhound", "Hairless Khala", "Harrier", "Havamalt (h)",
  "Havanese", "Hawaiian Poi Dog", "Hellenikos Ichnilatis", "Hellenikos Poimenikos",
  "Hokkaido", "Hovawart", "Ibizan Hound", "Icelandic Sheepdog", "Irish Doodle",
  "Irish Red and White Setter", "Irish Setter", "Irish Staffordshire Bull Terrier",
  "Irish Terrier", "Irish Wolfhound", "Italian Greyhound", "Jack Russell Terrier",
  "Japanese Spaniel", "Japanese Spitz", "Jindo", "Kangal", "Karakachan",
  "Karelian Bear Dog", "Karst Shepherd", "Keeshond", "Kemmer Feist",
  "Kerry Blue Terrier", "King Corso", "King Shepherd", "Komondor", "Kooikerhondje",
  "Koolie", "Kunming Dog", "Kuvasz", "Kyi Leo", "Lab mix", "Lab Shepherd",
  "Lab Shepherd mix", "Labradoodle (h)", "Labrador Husky", "Labrador Retriever",
  "Lagotto Romagnolo", "Lakeland Terrier", "Lancashire Heeler", "Landseer Newfoundland",
  "Large Munsterlander", "Larson Lakeview Bulldogge", "Leonberger", "Lhasa Apso",
  "Lithuanian Hound", "Llewellin Setter", "Louisiana Catahoula Leopard Dog", "Lowchen",
  "Lundehund", "Maltese", "Malti Poo (h)", "Maltichon", "Manchester Terrier",
  "Maremma Sheepdog", "Markiesje", "Mastiff", "Mi Ki", "Mini Aussiedoodle",
  "Mini Bernedoodle", "Mini Goldendoodle", "Mini Poodle Mix", "Mini Sheepadoodle",
  "Miniature Australian Bulldog", "Miniature Australian Shepherd", "Miniature Dachshund",
  "Miniature Fox Terrier", "Miniature Littlefield Sheepdog", "Miniature Pinscher",
  "Miniature Poodle", "Miniature Schnauzer", "Mioritic Sheepdog", "Morkie (h)",
  "Moscow Watchdog", "Mountain Cur", "Mountain Feist", "Mountain View Cur",
  "Mucuchies", "Mudi", "Mutt", "N/A", "Native American Indian Dog",
  "Neapolitan Mastiff", "Nebolish Mastiff", "New Guinea Singing Dog",
  "New Zealand Huntaway", "Newfoundland", "Newfydoodle", "Norfolk Terrier",
  "Norwegian Buhund", "Norwegian Elkhound", "Norwich Terrier",
  "Nova Scotia Duck Tolling Retriever", "Old English Sheepdog", "Olde Boston Bulldogge",
  "Olde English Bulldogge", "Olde Victorian Bulldogge", "Ori Pei (h)", "Otterhound",
  "Papillon", "Parson Russell Terrier", "Patterdale Terrier", "Peekapoo", "Pekingese",
  "Pembroke Welsh Corgi", "Perdiguero de Burgos", "Peruvian Inca Orchid",
  "Petit Basset Griffon Vendeen", "Pharaoh Hound", "Pitbull", "Plott Hound",
  "Pointer", "Polski Owczarek Nizinny", "Pomchi (h)", "Pomeranian", "Pompoo",
  "Pomski", "Poodle Mix", "Porcelaine", "Portuguese Hound", "Portuguese podengo Mix",
  "Portuguese Water Dog", "Prazsky Krysarik", "Pug", "Puggle (h)", "Puli", "Pumi",
  "Rafeiro do Alentejo", "Raibs Suns", "Rat Terrier", "Redbone Coonhound",
  "Rhodesian Ridgeback", "Roman Rottweiler", "Rottweiler", "Russian Spaniel",
  "Russian Toy Terrier", "Saarlooswolfhond", "Saint Berdoodle (h)", "Saint Bernard",
  "Saluki", "Samoyed", "Sarplaninac", "Schipperke", "Schnoodle (h)",
  "Scottish Deerhound", "Scottish Terrier", "Sealyham Terrier", "Shar Pei",
  "Sheepadoodle", "Shepherd Terrier", "Shetland Sheepdog", "Shiba Inu",
  "Shichon (h)", "Shiffon", "Shih Tzu", "Shikoku", "Shiloh Shepherd", "Shipoo",
  "Shiranian (h)", "Shorkie (h)", "Shorkiepoo", "Siberian Husky", "Silken Windhound",
  "Silky Terrier", "Skye Terrier", "Sloughi", "Slovensky Cuvac", "Smooth Fox Terrier",
  "Soft Coated Wheaten Terrier", "South Russian Ovtcharka", "Spanish Mastiff",
  "Spanish Water Dog", "Spinone Italiano", "Stabyhoun", "Staffordshire Bull Terrier",
  "Standard Poodle", "Standard Schnauzer", "Sussex Spaniel", "Swedish Vallhund",
  "Tamaskan Dog", "Teacup Poodle", "Teddy Bear Mix", "Tenterfield Terrier",
  "Thai Ridgeback", "Tibetan Mastiff", "Tibetan Spaniel", "Tibetan Terrier",
  "Titan Bull Dogge", "Tornjak", "Tosa Inu", "Toy Fox Terrier", "Toy Poodle",
  "Treeing Walker Coonhound", "Valley Bulldog", "Victorian Bulldog", "Vizsla",
  "Weimaraner", "Weimardoodle (h)", "Welsh Springer Spaniel", "Welsh Terrier",
  "West Highland White Terrier", "Wetterhoun", "Whippet", "Wirehaired Fox Terrier",
  "Wirehaired Pointing Griffon", "Wirehaired Vizsla", "Xoloitzcuintli", "Yorkipoo",
  "Yorkshire Terrier"
];

// Actual pricing data from MoeGo
const pricingData = {
  'Bath': {
    '0-5': 30, '6-10': 35, '11-25': 50, '26-50': 65, '51-70': 75, '71-110': 100, '111+': 115
  },
  'Groom': {
    '0-5': 65, '6-10': 70, '11-25': 80, '26-50': 100, '51-70': 125, '71-110': 135, '111+': 150
  },
  'Groom+': {
    '0-5': 90, '6-10': 100, '11-25': 125, '26-50': 160, '51-70': 195, '71-110': 230, '111+': 260
  }
};
---

<Layout title="Memberships">
  <!-- Hero Section - Premium Professional Design -->
  <section class="membership-hero-section relative isolate">
    <Container>
      <div class="relative rounded-[2rem] overflow-hidden membership-hero-card">
        <!-- Image Background -->
        <img
          src="/memberships-hero.webp"
          alt="Grooming Memberships"
          class="w-full h-[85vh] object-cover object-[center_30%]"
        />

        <!-- Dark Overlay for Better Text Readability -->
        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/60 to-black/40"></div>
        <div class="absolute inset-0 bg-gradient-to-r from-black/50 via-black/20 to-transparent"></div>

        <!-- Content Container -->
        <div class="absolute inset-0 flex flex-col justify-between p-6 md:p-8 lg:p-10">

          <!-- Top Bar - Status Badge -->
          <div class="flex justify-between items-start">
            <div class="membership-status-badge inline-flex items-center gap-3 bg-white px-5 py-2.5 rounded-full shadow-xl">
              <div class="relative flex items-center justify-center">
                <span class="absolute w-2.5 h-2.5 bg-brand-green rounded-full animate-ping opacity-75"></span>
                <span class="relative w-2.5 h-2.5 bg-brand-green rounded-full"></span>
              </div>
              <span class="text-gray-900 font-semibold text-sm">Save More, Groom Smarter</span>
            </div>

            <!-- Trust Badge -->
            <div class="hidden md:flex items-center gap-2 bg-white px-4 py-2.5 rounded-full shadow-xl">
              <Icon name="lucide:crown" class="w-5 h-5 text-brand-green" />
              <span class="text-gray-900 font-semibold text-sm">VIP Perks Included</span>
            </div>
          </div>

          <!-- Main Content - Bottom Aligned -->
          <div class="max-w-3xl">
            <!-- Eyebrow -->
            <div class="flex items-center gap-3 mb-4 membership-hero-animate" style="animation-delay: 0.1s">
              <div class="flex items-center gap-2">
                <Icon name="lucide:crown" class="w-5 h-5 text-brand-green" />
                <span class="text-sm font-bold tracking-[0.2em] uppercase text-brand-green">Grooming Memberships</span>
              </div>
              <div class="h-px flex-1 max-w-[100px] bg-gradient-to-r from-brand-green to-transparent"></div>
            </div>

            <!-- Main Heading -->
            <h1 class="membership-hero-animate mb-4" style="animation-delay: 0.2s">
              <span class="block text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black text-white leading-[1.1] tracking-tight drop-shadow-lg">
                Save More
              </span>
              <span class="block text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black leading-[1.1] tracking-tight mt-1">
                <span class="membership-hero-gradient-text drop-shadow-lg">Groom Smarter</span>
              </span>
            </h1>

            <!-- Subtitle -->
            <p class="text-base md:text-lg text-white leading-relaxed max-w-xl mb-6 membership-hero-animate drop-shadow-md" style="animation-delay: 0.3s">
              Join hundreds of happy pet parents saving money while keeping their furry friends looking fabulous.
              <span class="font-semibold">$5 cheaper than a single service & it includes one!</span>
            </p>

            <!-- CTA Buttons -->
            <div class="flex flex-wrap gap-4 mb-6 membership-hero-animate" style="animation-delay: 0.4s">
              <a
                href="#become-member"
                class="flex items-center gap-3 bg-brand-green text-white px-6 md:px-8 py-4 rounded-full font-semibold transition-smooth hover:bg-[#6b9447] hover:-translate-y-1 shadow-lg hover:shadow-xl"
              >
                <Icon name="lucide:crown" class="w-5 h-5" />
                <span>Become a Member</span>
              </a>
              <a
                href="tel:+16316528485"
                class="flex items-center gap-3 border-2 border-brand-green text-brand-green bg-white px-6 md:px-8 py-4 rounded-full font-semibold transition-smooth hover:bg-brand-green hover:text-white hover:-translate-y-1 shadow-lg hover:shadow-xl"
              >
                <Icon name="lucide:phone" class="w-5 h-5" />
                <span>(631) 652-8485</span>
              </a>
            </div>

            <!-- Quick Info Pills -->
            <div class="flex flex-wrap gap-3 membership-hero-animate" style="animation-delay: 0.5s">
              <div class="flex items-center gap-2 bg-black/40 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30">
                <Icon name="lucide:check-circle" class="w-4 h-4 text-brand-green" />
                <span class="text-white text-sm font-medium">Service Included</span>
              </div>
              <div class="flex items-center gap-2 bg-black/40 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30">
                <Icon name="lucide:gift" class="w-4 h-4 text-brand-green" />
                <span class="text-white text-sm font-medium">Free Add-Ons</span>
              </div>
              <div class="flex items-center gap-2 bg-black/40 backdrop-blur-sm px-4 py-2 rounded-full border border-white/30">
                <Icon name="lucide:calendar" class="w-4 h-4 text-brand-green" />
                <span class="text-white text-sm font-medium">Flexible Billing</span>
              </div>
            </div>
          </div>
        </div>

      </div>
    </Container>
  </section>

  <!-- Video Section -->
  <section class="pt-4 md:pt-6 pb-12 md:pb-16 video-section relative">
    <!-- Animated Background Elements - contained to prevent mobile overflow -->
    <div class="video-orbs-container">
      <div class="video-bg-orb video-bg-orb-1"></div>
      <div class="video-bg-orb video-bg-orb-2"></div>
      <div class="video-bg-orb video-bg-orb-3"></div>
    </div>

    <Container>
      <div class="max-w-4xl mx-auto relative">
        <!-- Section Header with Animation -->
        <div class="text-center mb-10 video-header-animate">
          <!-- Simple eyebrow with icon -->
          <div class="inline-flex items-center gap-2 text-brand-green text-sm font-semibold tracking-wide uppercase mb-3">
            <Icon name="lucide:clock" class="w-4 h-4" />
            <span>1-Minute Explainer</span>
          </div>

          <!-- Main headline with gradient -->
          <h2 class="text-3xl md:text-5xl font-black text-gray-900 mb-4 leading-tight">
            See How It
            <span class="relative inline-block">
              <span class="video-headline-gradient">Works</span>
              <svg class="absolute -bottom-2 left-0 w-full h-3 text-brand-green/30" viewBox="0 0 100 12" preserveAspectRatio="none">
                <path d="M0,8 Q25,0 50,8 T100,8" stroke="currentColor" stroke-width="4" fill="none" stroke-linecap="round"/>
              </svg>
            </span>
          </h2>

          <!-- Subtitle -->
          <p class="text-gray-500 text-base md:text-lg max-w-md mx-auto">
            Discover how our membership program benefits you & your furry friend
          </p>
        </div>

        <!-- Video Container with Decorative Frame -->
        <div class="relative video-container-wrapper">
          <!-- Decorative Corner Elements -->
          <div class="absolute -top-3 -left-3 w-12 h-12 border-t-4 border-l-4 border-brand-green/30 rounded-tl-xl video-corner-animate"></div>
          <div class="absolute -top-3 -right-3 w-12 h-12 border-t-4 border-r-4 border-brand-green/30 rounded-tr-xl video-corner-animate"></div>
          <div class="absolute -bottom-3 -left-3 w-12 h-12 border-b-4 border-l-4 border-brand-green/30 rounded-bl-xl video-corner-animate"></div>
          <div class="absolute -bottom-3 -right-3 w-12 h-12 border-b-4 border-r-4 border-brand-green/30 rounded-br-xl video-corner-animate"></div>

          <!-- Glow Effect Behind Video -->
          <div class="absolute -inset-4 bg-gradient-to-r from-brand-green/20 via-emerald-400/20 to-brand-green/20 rounded-3xl blur-2xl video-glow-animate"></div>

          <!-- Video Container -->
          <div class="relative rounded-2xl overflow-hidden shadow-2xl bg-black aspect-video cursor-pointer group video-frame-animate" id="video-container">
            <!-- Animated Border -->
            <div class="absolute inset-0 rounded-2xl video-border-gradient pointer-events-none z-20"></div>

            <!-- Thumbnail with Play Button -->
            <div id="video-thumbnail" class="absolute inset-0 z-10">
              <img
                src="/images/membership-promo-thumbnail.webp"
                alt="Membership Video Thumbnail"
                class="w-full h-full object-cover"
              />
              <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-black/20 group-hover:from-black/70 group-hover:via-black/40 transition-all duration-500"></div>

              <!-- Play Button with Pulse Animation -->
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="relative">
                  <!-- Pulse Rings -->
                  <div class="absolute inset-0 w-24 h-24 md:w-32 md:h-32 -m-2 md:-m-4">
                    <div class="absolute inset-0 bg-brand-green/30 rounded-full animate-ping-slow"></div>
                    <div class="absolute inset-2 bg-brand-green/20 rounded-full animate-ping-slower"></div>
                  </div>
                  <!-- Play Button -->
                  <div class="relative w-20 h-20 md:w-24 md:h-24 bg-gradient-to-br from-brand-green to-emerald-600 rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 group-hover:shadow-brand-green/50 transition-all duration-300">
                    <Icon name="lucide:play" class="w-10 h-10 md:w-12 md:h-12 text-white ml-1" />
                  </div>
                </div>
              </div>

              <!-- Watch Now Text -->
              <div class="absolute bottom-6 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:-translate-y-1">
                <span class="bg-white/90 backdrop-blur-sm text-gray-900 text-sm font-semibold px-4 py-2 rounded-full shadow-lg">
                  Click to Watch
                </span>
              </div>
            </div>

            <!-- Local Video (hidden until clicked) -->
            <video
              id="local-video"
              class="absolute inset-0 w-full h-full hidden"
              controls
              playsinline
            >
              <source src="/videos/membership-promo.mp4" type="video/mp4" />
              Your browser does not support the video tag.
            </video>
          </div>
        </div>

        <!-- CTA Button -->
        <div class="mt-10 text-center video-cta-animate">
          <a
            href="#become-member"
            class="video-cta-button inline-flex items-center gap-3 bg-gradient-to-r from-brand-green to-emerald-600 text-white px-8 py-4 rounded-full font-bold text-lg shadow-xl hover:shadow-2xl hover:shadow-brand-green/30 transition-all duration-300 group"
          >
            <Icon name="lucide:crown" class="w-6 h-6 group-hover:rotate-12 transition-transform duration-300" />
            <span>Become a Member</span>
            <Icon name="lucide:arrow-down" class="w-5 h-5 group-hover:translate-y-1 transition-transform duration-300" />
          </a>
          <p class="mt-4 text-gray-500 text-sm flex items-center justify-center gap-2">
            <Icon name="lucide:sparkles" class="w-4 h-4 text-brand-green" />
            <span>Join 500+ happy pet parents saving money</span>
            <Icon name="lucide:sparkles" class="w-4 h-4 text-brand-green" />
          </p>
        </div>
      </div>
    </Container>
  </section>

  <div class="pt-4 pb-12">
    <Container>
      <!-- Choose Your Plan Header -->
      <div class="text-center mb-8">
        <div class="inline-flex items-center gap-3 mb-3">
          <div class="h-px w-8 bg-gradient-to-r from-transparent to-brand-green/50"></div>
          <Icon name="lucide:paw-print" class="w-5 h-5 text-brand-green" />
          <div class="h-px w-8 bg-gradient-to-l from-transparent to-brand-green/50"></div>
        </div>
        <h2 class="text-2xl md:text-3xl font-bold text-gray-900">Choose Your Plan</h2>
        <p class="text-gray-500 text-sm mt-1">Select a plan below, then choose how often you'd like to be billed</p>
      </div>
    </Container>

    <!-- Membership Cards Grid - Horizontal slider on mobile (FULL WIDTH) -->
    <div class="md:hidden overflow-hidden mb-10" id="membership-cards-carousel">
        <div class="flex gap-4 animate-scroll-membership-cards" id="membership-cards-track">
          <!-- First set of cards -->
          <!-- Bath Plan - BLUE -->
          <div class="membership-card-mobile membership-card-blue flex-shrink-0 w-[280px] rounded-2xl overflow-hidden border border-blue-200 relative flex flex-col">
            <div class="p-5 relative z-10">
              <div class="flex flex-col items-center text-center gap-3 mb-4">
                <div class="w-14 h-14 rounded-xl bg-blue-100 border-2 border-blue-300 flex items-center justify-center">
                  <Icon name="lucide:droplets" class="w-7 h-7 text-brand-blue" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900">Bath</h3>
                  <p class="text-brand-blue text-xs font-semibold">1x Bath & Brush per Billing Cycle</p>
                </div>
              </div>
            </div>
            <div class="flex flex-col flex-1">
              <div class="bg-white/80 border-t border-blue-200 p-4 relative z-10 flex-1">
                <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2">Also Included:</p>
                <ul class="space-y-1.5">
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>10% OFF additional sessions</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>Unlimited wellness check-ups</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>1 FREE nail trim</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>1 FREE teeth brushing</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>1 FREE ear cleaning</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>5% OFF retail products</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>10% OFF boarding</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>Priority booking</span></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Groom Plan - GREEN -->
          <div class="membership-card-mobile membership-card-green flex-shrink-0 w-[280px] rounded-2xl overflow-hidden border border-emerald-200 relative flex flex-col">
            <div class="p-5 relative z-10">
              <div class="flex flex-col items-center text-center gap-3 mb-4">
                <div class="w-14 h-14 rounded-xl bg-emerald-100 border-2 border-emerald-300 flex items-center justify-center">
                  <Icon name="lucide:scissors" class="w-7 h-7 text-brand-green" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900">Groom</h3>
                  <p class="text-brand-green text-xs font-semibold">1x Full Groom per Billing Cycle</p>
                </div>
              </div>
            </div>
            <div class="flex flex-col flex-1">
              <div class="bg-white/80 border-t border-emerald-200 p-4 relative z-10 flex-1">
                <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2">Also Included:</p>
                <ul class="space-y-1.5">
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF additional sessions</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Unlimited wellness check-ups</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE nail trim</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE teeth brushing</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE ear cleaning</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>5% OFF retail products</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF boarding</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Priority booking</span></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Groom+ Plan - PREMIUM GREEN -->
          <div class="membership-card-mobile membership-card-green-premium flex-shrink-0 w-[280px] rounded-2xl overflow-hidden border-2 border-emerald-400 relative flex flex-col">
            <div class="absolute top-0 right-0 bg-gradient-to-r from-brand-green to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl z-20">BEST VALUE</div>
            <div class="p-5 relative z-10">
              <div class="flex flex-col items-center text-center gap-3 mb-4">
                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-brand-green to-emerald-600 flex items-center justify-center ring-2 ring-emerald-300">
                  <Icon name="lucide:crown" class="w-7 h-7 text-white" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900">Groom+</h3>
                  <p class="text-brand-green text-xs font-semibold">1x Groom + 1x Bath per Billing Cycle</p>
                </div>
              </div>
            </div>
            <div class="flex flex-col flex-1">
              <div class="bg-white/80 border-t border-emerald-300 p-4 relative z-10 flex-1">
                <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2">Also Included:</p>
                <ul class="space-y-1.5">
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF additional sessions</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Unlimited wellness check-ups</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE nail trim</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE teeth brushing</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE ear cleaning</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>5% OFF retail products</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF boarding</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Priority booking</span></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Duplicate set for seamless infinite loop -->
          <!-- Bath Plan - BLUE (duplicate) -->
          <div class="membership-card-mobile membership-card-blue flex-shrink-0 w-[280px] rounded-2xl overflow-hidden border border-blue-200 relative flex flex-col">
            <div class="p-5 relative z-10">
              <div class="flex flex-col items-center text-center gap-3 mb-4">
                <div class="w-14 h-14 rounded-xl bg-blue-100 border-2 border-blue-300 flex items-center justify-center">
                  <Icon name="lucide:droplets" class="w-7 h-7 text-brand-blue" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900">Bath</h3>
                  <p class="text-brand-blue text-xs font-semibold">1x Bath & Brush per Billing Cycle</p>
                </div>
              </div>
            </div>
            <div class="flex flex-col flex-1">
              <div class="bg-white/80 border-t border-blue-200 p-4 relative z-10 flex-1">
                <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2">Also Included:</p>
                <ul class="space-y-1.5">
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>10% OFF additional sessions</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>Unlimited wellness check-ups</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>1 FREE nail trim</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>1 FREE teeth brushing</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>1 FREE ear cleaning</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>5% OFF retail products</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>10% OFF boarding</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-blue flex-shrink-0" /><span>Priority booking</span></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Groom Plan - GREEN (duplicate) -->
          <div class="membership-card-mobile membership-card-green flex-shrink-0 w-[280px] rounded-2xl overflow-hidden border border-emerald-200 relative flex flex-col">
            <div class="p-5 relative z-10">
              <div class="flex flex-col items-center text-center gap-3 mb-4">
                <div class="w-14 h-14 rounded-xl bg-emerald-100 border-2 border-emerald-300 flex items-center justify-center">
                  <Icon name="lucide:scissors" class="w-7 h-7 text-brand-green" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900">Groom</h3>
                  <p class="text-brand-green text-xs font-semibold">1x Full Groom per Billing Cycle</p>
                </div>
              </div>
            </div>
            <div class="flex flex-col flex-1">
              <div class="bg-white/80 border-t border-emerald-200 p-4 relative z-10 flex-1">
                <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2">Also Included:</p>
                <ul class="space-y-1.5">
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF additional sessions</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Unlimited wellness check-ups</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE nail trim</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE teeth brushing</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE ear cleaning</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>5% OFF retail products</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF boarding</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Priority booking</span></li>
                </ul>
              </div>
            </div>
          </div>
          <!-- Groom+ Plan - PREMIUM GREEN (duplicate) -->
          <div class="membership-card-mobile membership-card-green-premium flex-shrink-0 w-[280px] rounded-2xl overflow-hidden border-2 border-emerald-400 relative flex flex-col">
            <div class="absolute top-0 right-0 bg-gradient-to-r from-brand-green to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl z-20">BEST VALUE</div>
            <div class="p-5 relative z-10">
              <div class="flex flex-col items-center text-center gap-3 mb-4">
                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-brand-green to-emerald-600 flex items-center justify-center ring-2 ring-emerald-300">
                  <Icon name="lucide:crown" class="w-7 h-7 text-white" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900">Groom+</h3>
                  <p class="text-brand-green text-xs font-semibold">1x Groom + 1x Bath per Billing Cycle</p>
                </div>
              </div>
            </div>
            <div class="flex flex-col flex-1">
              <div class="bg-white/80 border-t border-emerald-300 p-4 relative z-10 flex-1">
                <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2">Also Included:</p>
                <ul class="space-y-1.5">
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF additional sessions</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Unlimited wellness check-ups</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE nail trim</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE teeth brushing</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>1 FREE ear cleaning</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>5% OFF retail products</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>10% OFF boarding</span></li>
                  <li class="flex items-center gap-2 text-gray-800 text-xs"><Icon name="lucide:check-circle" class="w-3.5 h-3.5 text-brand-green flex-shrink-0" /><span>Priority booking</span></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <Container>
      <!-- Desktop Grid - Unchanged -->
      <div class="hidden md:grid md:grid-cols-3 gap-6 mb-10">
        <!-- Bath Plan - BLUE -->
        <div class="membership-card membership-card-blue rounded-2xl overflow-hidden shadow-lg border border-blue-200 relative flex flex-col min-w-[280px] md:min-w-0 snap-center" data-membership="bath">
          <div class="p-5 md:p-6 relative z-10">
            <div class="flex flex-col items-center text-center gap-3 mb-4">
              <div class="w-14 h-14 md:w-16 md:h-16 rounded-xl bg-blue-100 border-2 border-blue-300 flex items-center justify-center">
                <Icon name="lucide:droplets" class="w-7 h-7 md:w-8 md:h-8 text-brand-blue" />
              </div>
              <div>
                <h3 class="text-lg md:text-xl font-bold text-gray-900">Bath</h3>
                <p class="text-brand-blue text-xs md:text-sm font-semibold">1x Bath & Brush per Billing Cycle</p>
              </div>
            </div>
          </div>
          <!-- Benefits - always visible -->
          <div class="flex flex-col flex-1">
            <div class="bg-white/80 border-t border-blue-200 p-4 md:p-5 relative z-10 flex-1">
              <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2 md:mb-3">Also Included:</p>
              <ul class="space-y-1.5 md:space-y-2">
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>10% OFF additional sessions</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>Unlimited wellness check-ups</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>1 FREE nail trim</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>1 FREE teeth brushing</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>1 FREE ear cleaning</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>5% OFF retail products</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>10% OFF boarding</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-blue flex-shrink-0" />
                  <span>Priority booking</span>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Groom Plan - GREEN -->
        <div class="membership-card membership-card-green rounded-2xl overflow-hidden shadow-lg border border-emerald-200 relative flex flex-col min-w-[280px] md:min-w-0 snap-center" data-membership="groom">
          <div class="p-5 md:p-6 relative z-10">
            <div class="flex flex-col items-center text-center gap-3 mb-4">
              <div class="w-14 h-14 md:w-16 md:h-16 rounded-xl bg-emerald-100 border-2 border-emerald-300 flex items-center justify-center">
                <Icon name="lucide:scissors" class="w-7 h-7 md:w-8 md:h-8 text-brand-green" />
              </div>
              <div>
                <h3 class="text-lg md:text-xl font-bold text-gray-900">Groom</h3>
                <p class="text-brand-green text-xs md:text-sm font-semibold">1x Full Groom per Billing Cycle</p>
              </div>
            </div>
          </div>
          <!-- Benefits - always visible -->
          <div class="flex flex-col flex-1">
            <div class="bg-white/80 border-t border-emerald-200 p-4 md:p-5 relative z-10 flex-1">
              <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2 md:mb-3">Also Included:</p>
              <ul class="space-y-1.5 md:space-y-2">
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>10% OFF additional sessions</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>Unlimited wellness check-ups</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>1 FREE nail trim</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>1 FREE teeth brushing</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>1 FREE ear cleaning</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>5% OFF retail products</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>10% OFF boarding</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>Priority booking</span>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Groom+ Plan - PREMIUM GREEN -->
        <div class="membership-card membership-card-green-premium rounded-2xl overflow-hidden shadow-xl border-2 border-emerald-400 relative flex flex-col min-w-[280px] md:min-w-0 snap-center" data-membership="groom-plus">
          <div class="absolute top-0 right-0 bg-gradient-to-r from-brand-green to-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl z-20">
            BEST VALUE
          </div>
          <div class="p-5 md:p-6 relative z-10">
            <div class="flex flex-col items-center text-center gap-3 mb-4">
              <div class="w-14 h-14 md:w-16 md:h-16 rounded-xl bg-gradient-to-br from-brand-green to-emerald-600 flex items-center justify-center shadow-lg ring-2 ring-emerald-300">
                <Icon name="lucide:crown" class="w-7 h-7 md:w-8 md:h-8 text-white" />
              </div>
              <div>
                <h3 class="text-lg md:text-xl font-bold text-gray-900">Groom+</h3>
                <p class="text-brand-green text-xs md:text-sm font-semibold">1x Groom + 1x Bath per Billing Cycle</p>
              </div>
            </div>
          </div>
          <!-- Benefits - always visible -->
          <div class="flex flex-col flex-1">
            <div class="bg-white/80 border-t border-emerald-300 p-4 md:p-5 relative z-10 flex-1">
              <p class="text-gray-600 text-xs font-bold uppercase tracking-wider mb-2 md:mb-3">Also Included:</p>
              <ul class="space-y-1.5 md:space-y-2">
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>10% OFF additional sessions</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>Unlimited wellness check-ups</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>1 FREE nail trim</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>1 FREE teeth brushing</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>1 FREE ear cleaning</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>5% OFF retail products</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>10% OFF boarding</span>
                </li>
                <li class="flex items-center gap-2 text-gray-800 text-xs md:text-sm">
                  <Icon name="lucide:check-circle" class="w-3.5 h-3.5 md:w-4 md:h-4 text-brand-green flex-shrink-0" />
                  <span>Priority booking</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Become a Member Section -->
      <div id="become-member" class="max-w-5xl mx-auto mb-12 scroll-mt-24">
        <!-- Section Header with decorative elements -->
        <div class="text-center mb-10">
          <div class="inline-flex items-center gap-3 mb-3">
            <div class="h-px w-12 bg-gradient-to-r from-transparent to-brand-green/50"></div>
            <div class="w-10 h-10 bg-gradient-to-br from-brand-green to-emerald-600 rounded-xl flex items-center justify-center shadow-lg">
              <Icon name="lucide:sparkles" class="w-5 h-5 text-white" />
            </div>
            <div class="h-px w-12 bg-gradient-to-l from-transparent to-brand-green/50"></div>
          </div>
          <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900">Become a Member</h2>
          <p class="text-gray-500 mt-2">Start your membership journey today</p>
        </div>

        <!-- Modern Form Design -->
        <form id="membershipForm" class="relative">
          <!-- Step indicators -->
          <div class="flex items-center justify-center gap-2 md:gap-4 mb-8" id="stepIndicators">
            <div class="flex items-center gap-2" id="stepIndicator1">
              <div class="step-circle w-8 h-8 rounded-full bg-brand-green text-white flex items-center justify-center text-sm font-bold transition-all">1</div>
              <span class="step-label hidden md:inline text-sm font-medium text-gray-700 transition-all">Your Info</span>
            </div>
            <div class="step-line w-8 md:w-16 h-0.5 bg-gray-200 transition-all" id="stepLine1"></div>
            <div class="flex items-center gap-2" id="stepIndicator2">
              <div class="step-circle w-8 h-8 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-bold transition-all">2</div>
              <span class="step-label hidden md:inline text-sm font-medium text-gray-400 transition-all">Your Pup</span>
            </div>
            <div class="step-line w-8 md:w-16 h-0.5 bg-gray-200 transition-all" id="stepLine2"></div>
            <div class="flex items-center gap-2" id="stepIndicator3">
              <div class="step-circle w-8 h-8 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center text-sm font-bold transition-all">3</div>
              <span class="step-label hidden md:inline text-sm font-medium text-gray-400 transition-all">Review</span>
            </div>
          </div>

          <!-- Form Cards Container -->
          <div class="space-y-6">
            <!-- Customer Information Card - Step 1 -->
            <div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden form-card step-card" data-step="1">
              <div class="bg-gradient-to-r from-gray-50 to-white px-6 py-4 border-b border-gray-100">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-gradient-to-br from-brand-green/20 to-emerald-100 rounded-xl flex items-center justify-center">
                    <Icon name="lucide:user" class="w-5 h-5 text-brand-green" />
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Your Information</h3>
                    <p class="text-xs text-gray-500">We'll use this to contact you</p>
                  </div>
                </div>
              </div>
              <div class="p-6">
                <div class="grid md:grid-cols-2 gap-4">
                  <div class="form-group">
                    <label for="firstName" class="form-label">First Name <span class="text-red-500">*</span></label>
                    <input type="text" id="firstName" name="firstName" maxlength="20" required class="form-input" placeholder="John" />
                  </div>
                  <div class="form-group">
                    <label for="lastName" class="form-label">Last Name <span class="text-red-500">*</span></label>
                    <input type="text" id="lastName" name="lastName" maxlength="20" required class="form-input" placeholder="Smith" />
                  </div>
                  <div class="form-group">
                    <label for="phone" class="form-label">Phone Number <span class="text-red-500">*</span></label>
                    <input type="tel" id="phone" name="phone" placeholder="(555) 123-4567" maxlength="14" required class="form-input" />
                  </div>
                  <div class="form-group">
                    <label for="email" class="form-label">Email <span class="text-gray-400 font-normal">(optional)</span></label>
                    <input type="email" id="email" name="email" placeholder="john@email.com" class="form-input" />
                  </div>
                </div>

                <!-- Step 1 Navigation -->
                <div class="flex justify-end mt-6 pt-4 border-t border-gray-100">
                  <button type="button" id="nextStep1" disabled class="inline-flex items-center gap-2 bg-gradient-to-r from-brand-green to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-lg">
                    <Icon name="lucide:lock" class="w-4 h-4 locked-icon" />
                    <span>Next: Add Your Pups</span>
                    <Icon name="lucide:arrow-right" class="w-5 h-5" />
                  </button>
                </div>
              </div>
            </div>

            <!-- Dogs Information Card - Step 2 -->
            <div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden form-card step-card hidden" data-step="2">
              <div class="bg-gradient-to-r from-gray-50 to-white px-6 py-4 border-b border-gray-100">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-gradient-to-br from-brand-green/20 to-emerald-100 rounded-xl flex items-center justify-center">
                    <Icon name="lucide:heart" class="w-5 h-5 text-brand-green" />
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">Your Pup's Details</h3>
                    <p class="text-xs text-gray-500">Tell us about your furry friend</p>
                  </div>
                </div>
              </div>
              <div class="p-6">
                <div id="dogsContainer" class="space-y-4">
                  <!-- Dog sections will be added by JavaScript -->
                </div>

                <button type="button" class="add-dog-btn mt-5 w-full flex items-center justify-center gap-2 bg-gradient-to-r from-gray-50 to-emerald-50 border-2 border-dashed border-brand-green/30 text-brand-green px-6 py-3 rounded-xl font-medium hover:border-brand-green hover:bg-emerald-50 transition-all group">
                  <Icon name="lucide:plus" class="w-5 h-5 group-hover:scale-110 transition-transform" />
                  Add Another Dog
                </button>

                <!-- Step 2 Navigation -->
                <div class="flex flex-col md:flex-row md:justify-between items-center gap-3 mt-6 pt-4 border-t border-gray-100">
                  <button type="button" id="nextStep2" disabled class="w-full md:w-auto order-1 md:order-2 inline-flex items-center justify-center gap-2 bg-gradient-to-r from-brand-green to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-lg">
                    <Icon name="lucide:lock" class="w-4 h-4 locked-icon" />
                    <span>Next: Review Order</span>
                    <Icon name="lucide:arrow-right" class="w-5 h-5" />
                  </button>
                  <button type="button" id="backStep2" class="order-2 md:order-1 inline-flex items-center gap-1 text-gray-500 hover:text-gray-700 text-sm font-medium transition-all md:bg-gray-100 md:hover:bg-gray-200 md:text-gray-700 md:px-6 md:py-3 md:rounded-xl md:font-semibold">
                    <Icon name="lucide:arrow-left" class="w-4 h-4" />
                    <span>Back</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- Summary Card - Step 3 -->
            <div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden form-card step-card hidden" data-step="3">
              <div class="bg-gradient-to-r from-brand-green to-emerald-600 px-4 md:px-6 py-3 md:py-4">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 md:w-10 md:h-10 bg-white/20 rounded-xl flex items-center justify-center">
                    <Icon name="lucide:receipt" class="w-4 h-4 md:w-5 md:h-5 text-white" />
                  </div>
                  <div>
                    <h3 class="font-bold text-white text-sm md:text-base">Order Summary</h3>
                    <p class="text-[10px] md:text-xs text-white/80">Review your selections</p>
                  </div>
                </div>
              </div>
              <div class="p-4 md:p-6">
                <!-- Customer Info Summary -->
                <div class="mb-3 md:mb-4 p-3 md:p-4 bg-gray-50 rounded-xl">
                  <h4 class="text-xs md:text-sm font-semibold text-gray-700 mb-1">Your Information</h4>
                  <p id="customerSummary" class="text-gray-600 text-xs md:text-sm">-</p>
                </div>

                <!-- Mobile: Card-based summary -->
                <div class="md:hidden" id="summaryCards">
                  <div class="text-center py-6 text-gray-400">
                    <Icon name="lucide:paw-print" class="w-6 h-6 mx-auto mb-2 opacity-30" />
                    <p class="text-xs">Add your pup to see pricing</p>
                  </div>
                </div>

                <!-- Desktop: Table-based summary -->
                <div class="hidden md:block rounded-xl border border-gray-200 overflow-hidden">
                  <table class="w-full" id="summaryTable">
                    <thead class="bg-gray-50">
                      <tr>
                        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Dog</th>
                        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Plan</th>
                        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Billing</th>
                        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Start</th>
                        <th class="px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider">Price</th>
                      </tr>
                    </thead>
                    <tbody id="summaryBody">
                      <tr>
                        <td colspan="5" class="px-4 py-10 text-center text-gray-400">
                          <Icon name="lucide:paw-print" class="w-8 h-8 mx-auto mb-2 opacity-30" />
                          <p class="text-sm">Add your pup to see pricing</p>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- Step 3 Navigation -->
                <div class="flex flex-col md:flex-row md:justify-between items-center gap-3 mt-4 md:mt-6 pt-4 border-t border-gray-100">
                  <button type="button" class="purchase-btn w-full md:w-auto order-1 md:order-2 inline-flex items-center justify-center gap-2 md:gap-3 bg-gradient-to-r from-brand-green to-emerald-600 text-white px-6 md:px-8 py-3 md:py-4 rounded-xl font-bold text-base md:text-lg shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 disabled:hover:shadow-lg group" id="purchaseBtn" disabled>
                    <Icon name="lucide:shield-check" class="w-4 h-4 md:w-5 md:h-5" />
                    <span>Complete Purchase</span>
                    <Icon name="lucide:arrow-right" class="w-4 h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform" />
                  </button>
                  <button type="button" id="backStep3" class="order-2 md:order-1 inline-flex items-center gap-1 text-gray-500 hover:text-gray-700 text-sm font-medium transition-all md:bg-gray-100 md:hover:bg-gray-200 md:text-gray-700 md:px-6 md:py-3 md:rounded-xl md:font-semibold">
                    <Icon name="lucide:arrow-left" class="w-4 h-4" />
                    <span>Back</span>
                  </button>
                </div>

                <div class="flex items-center justify-center gap-3 md:gap-4 mt-3 md:mt-4 text-[10px] md:text-xs text-gray-400">
                  <div class="flex items-center gap-1">
                    <Icon name="lucide:lock" class="w-3 h-3" />
                    <span>Secure</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <Icon name="lucide:credit-card" class="w-3 h-3" />
                    <span>Encrypted</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <Icon name="lucide:shield" class="w-3 h-3" />
                    <span>Protected</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>

      <!-- Contact Section - Apple-like minimal design -->
      <div class="flex justify-center mb-10">
        <a href="tel:+16316528485" class="inline-flex items-center gap-3 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-full px-5 py-3 transition-all group">
          <div class="w-8 h-8 bg-brand-green/10 rounded-full flex items-center justify-center group-hover:bg-brand-green/20 transition-colors">
            <Icon name="lucide:phone" class="w-4 h-4 text-brand-green" />
          </div>
          <span class="text-gray-600 text-sm">Questions?</span>
          <span class="font-semibold text-gray-900">(631) 652-8485</span>
        </a>
      </div>

      <!-- Value Proposition -->
      <div class="max-w-4xl mx-auto mb-10 px-4 md:px-0">
        <div class="value-prop-section rounded-2xl p-5 md:p-8 border border-brand-green/20 relative overflow-hidden">
          <div class="flex flex-col md:flex-row items-center gap-4 md:gap-6 relative z-10">
            <div class="flex-shrink-0">
              <div class="w-14 h-14 md:w-20 md:h-20 bg-gradient-to-br from-brand-green to-emerald-600 rounded-xl md:rounded-2xl flex items-center justify-center shadow-lg">
                <Icon name="lucide:piggy-bank" class="w-7 h-7 md:w-10 md:h-10 text-white" />
              </div>
            </div>
            <div class="text-center md:text-left">
              <h2 class="text-lg md:text-2xl font-bold text-gray-900 mb-2">
                <span class="text-brand-green">$5 Cheaper</span> Than a Single Service  And It Includes One!
              </h2>
              <p class="text-gray-600 text-sm md:text-lg leading-relaxed">
                Each membership includes a grooming service every billing cycle. Plus, enjoy free nail trims, teeth brushing, ear cleaning, and discounts on products & boarding.
              </p>
            </div>
          </div>
        </div>
      </div>

    </Container>
  </div>

  <!-- Payment Modal -->
  <div id="paymentModal" class="modal fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="modal-content bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden">
      <div class="bg-gradient-to-r from-brand-green to-emerald-600 p-6">
        <div class="flex items-center justify-between">
          <h2 class="text-2xl font-bold text-white flex items-center gap-3">
            <Icon name="lucide:credit-card" class="w-7 h-7" />
            Payment Information
          </h2>
          <button class="close-modal text-white hover:bg-white/20 p-2 rounded-lg transition-colors">
            <Icon name="lucide:x" class="w-6 h-6" />
          </button>
        </div>
      </div>

      <div class="p-6 space-y-4">
        <div>
          <label for="cardholderName" class="block text-sm font-semibold text-gray-700 mb-2">Cardholder Name *</label>
          <input
            type="text"
            id="cardholderName"
            placeholder="John Doe"
            maxlength="40"
            required
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-green focus:border-brand-green transition-all"
          />
        </div>

        <div>
          <label for="cardNumber" class="block text-sm font-semibold text-gray-700 mb-2">Card Number *</label>
          <input
            type="text"
            id="cardNumber"
            placeholder="1234 5678 9012 3456"
            maxlength="19"
            required
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-green focus:border-brand-green transition-all"
          />
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label for="expiryDate" class="block text-sm font-semibold text-gray-700 mb-2">Expiry Date *</label>
            <input
              type="text"
              id="expiryDate"
              placeholder="MM/YY"
              maxlength="5"
              required
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-green focus:border-brand-green transition-all"
            />
          </div>

          <div>
            <label for="cvv" class="block text-sm font-semibold text-gray-700 mb-2">CVV *</label>
            <input
              type="text"
              id="cvv"
              placeholder="123"
              maxlength="4"
              required
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-green focus:border-brand-green transition-all"
            />
          </div>
        </div>

        <div>
          <label for="zipCode" class="block text-sm font-semibold text-gray-700 mb-2">ZIP Code *</label>
          <input
            type="text"
            id="zipCode"
            placeholder="12345"
            maxlength="10"
            required
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-brand-green focus:border-brand-green transition-all"
          />
        </div>

        <button
          type="button"
          class="confirm-payment w-full bg-gradient-to-r from-brand-green to-emerald-600 text-white px-6 py-4 rounded-lg font-bold hover:shadow-lg transition-all mt-6"
        >
          Complete Purchase
        </button>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="modal fixed inset-0 bg-black/60 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="modal-content bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden">
      <div class="bg-gradient-to-r from-brand-green to-emerald-600 p-6 text-center">
        <Icon name="lucide:check-circle" class="w-16 h-16 text-white mx-auto mb-3" />
        <h2 class="text-2xl font-bold text-white">Request Submitted!</h2>
      </div>

      <div class="p-6">
        <p class="text-lg text-gray-700 mb-4">
          Thank you for your membership request! We're currently processing your information and payment details.
        </p>
        <p class="text-gray-600 mb-6">
          You'll receive a confirmation email with all your membership details once everything is set up. This usually takes 1-2 business hours.
        </p>
        <button
          type="button"
          class="close-success w-full bg-gradient-to-r from-brand-green to-emerald-600 text-white px-6 py-4 rounded-lg font-bold hover:shadow-lg transition-all"
        >
          Close
        </button>
      </div>
    </div>
  </div>
</Layout>

<!-- Local Video Click Handler - Separate script without define:vars -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const videoContainer = document.getElementById('video-container');
    const videoThumbnail = document.getElementById('video-thumbnail');
    const localVideo = document.getElementById('local-video') as HTMLVideoElement;

    if (videoContainer && videoThumbnail && localVideo) {
      videoThumbnail.addEventListener('click', () => {
        videoThumbnail.classList.add('hidden');
        localVideo.classList.remove('hidden');
        localVideo.play();
      });
    }
  });
</script>

<script define:vars={{ dogBreeds, pricingData }}>
  let dogCounter = 0;
  let currentStep = 1;

  // Step navigation functions
  function goToStep(step) {
    currentStep = step;

    // Hide all step cards
    document.querySelectorAll('.step-card').forEach(card => {
      card.classList.add('hidden');
    });

    // Show the current step card
    const currentCard = document.querySelector(`[data-step="${step}"]`);
    if (currentCard) {
      currentCard.classList.remove('hidden');
    }

    // Update step indicators
    updateStepIndicators(step);

    // Scroll to form
    document.getElementById('membershipForm')?.scrollIntoView({ behavior: 'smooth', block: 'start' });

    // Update customer summary when going to step 3
    if (step === 3) {
      updateCustomerSummary();
      updateSummaryTable();
    }
  }

  function updateStepIndicators(currentStep) {
    for (let i = 1; i <= 3; i++) {
      const indicator = document.getElementById(`stepIndicator${i}`);
      const circle = indicator?.querySelector('.step-circle');
      const label = indicator?.querySelector('.step-label');
      const line = document.getElementById(`stepLine${i}`);

      if (i < currentStep) {
        // Completed step
        circle?.classList.remove('bg-gray-200', 'text-gray-500');
        circle?.classList.add('bg-brand-green', 'text-white');
        label?.classList.remove('text-gray-400');
        label?.classList.add('text-gray-700');
        line?.classList.remove('bg-gray-200');
        line?.classList.add('bg-brand-green');
      } else if (i === currentStep) {
        // Current step
        circle?.classList.remove('bg-gray-200', 'text-gray-500');
        circle?.classList.add('bg-brand-green', 'text-white');
        label?.classList.remove('text-gray-400');
        label?.classList.add('text-gray-700');
      } else {
        // Future step
        circle?.classList.remove('bg-brand-green', 'text-white');
        circle?.classList.add('bg-gray-200', 'text-gray-500');
        label?.classList.remove('text-gray-700');
        label?.classList.add('text-gray-400');
      }
    }
  }

  function validateStep1() {
    const firstName = document.getElementById('firstName')?.value?.trim();
    const lastName = document.getElementById('lastName')?.value?.trim();
    const phone = document.getElementById('phone')?.value?.trim();

    if (!firstName || !lastName || !phone) {
      alert('Please fill in all required fields: First Name, Last Name, and Phone Number.');
      return false;
    }

    // Basic phone validation (at least 10 digits)
    const phoneDigits = phone.replace(/\D/g, '');
    if (phoneDigits.length < 10) {
      alert('Please enter a valid phone number.');
      return false;
    }

    return true;
  }

  function validateStep2() {
    let isValid = true;
    let hasAtLeastOneDog = false;

    for (let i = 1; i <= dogCounter; i++) {
      const section = document.getElementById(`dog-${i}`);
      if (!section) continue;

      hasAtLeastOneDog = true;

      const dogName = document.getElementById(`dogName-${i}`)?.value?.trim();
      const dogBreed = document.getElementById(`dogBreed-${i}`)?.value?.trim();
      const dogWeight = document.getElementById(`dogWeight-${i}`)?.value;
      const membershipType = document.getElementById(`membershipType-${i}`)?.value;
      const billingCycle = document.getElementById(`billingCycle-${i}`)?.value;
      const startDate = document.getElementById(`startDate-${i}`)?.value;

      if (!dogName || !dogBreed || !dogWeight || !membershipType || !billingCycle || !startDate) {
        isValid = false;
        break;
      }

      // Check custom values if needed
      if ((billingCycle === 'custom-weeks' || billingCycle === 'custom-months') && !document.getElementById(`customValue-${i}`)?.value) {
        isValid = false;
        break;
      }

      if (startDate === 'specific-date' && !document.getElementById(`specificDate-${i}`)?.value) {
        isValid = false;
        break;
      }
    }

    if (!hasAtLeastOneDog) {
      alert('Please add at least one dog.');
      return false;
    }

    if (!isValid) {
      alert('Please fill in all required fields for each dog.');
      return false;
    }

    return true;
  }

  function updateCustomerSummary() {
    const firstName = document.getElementById('firstName')?.value || '';
    const lastName = document.getElementById('lastName')?.value || '';
    const phone = document.getElementById('phone')?.value || '';
    const email = document.getElementById('email')?.value || '';

    const customerSummary = document.getElementById('customerSummary');
    if (customerSummary) {
      let summaryText = `${firstName} ${lastName}  ${phone}`;
      if (email) {
        summaryText += `  ${email}`;
      }
      customerSummary.textContent = summaryText;
    }
  }

  // Real-time validation for Step 1
  function checkStep1Validity() {
    const firstName = document.getElementById('firstName')?.value?.trim();
    const lastName = document.getElementById('lastName')?.value?.trim();
    const phone = document.getElementById('phone')?.value?.trim();
    const phoneDigits = phone ? phone.replace(/\D/g, '') : '';

    const isValid = firstName && lastName && phoneDigits.length >= 10;
    const nextBtn = document.getElementById('nextStep1');
    const lockIcon = nextBtn?.querySelector('.locked-icon');

    if (nextBtn) {
      nextBtn.disabled = !isValid;
      if (lockIcon) {
        lockIcon.style.display = isValid ? 'none' : 'block';
      }
    }
  }

  // Real-time validation for Step 2
  function checkStep2Validity() {
    let isValid = true;
    let hasAtLeastOneDog = false;

    for (let i = 1; i <= dogCounter; i++) {
      const section = document.getElementById(`dog-${i}`);
      if (!section) continue;

      hasAtLeastOneDog = true;

      const dogName = document.getElementById(`dogName-${i}`)?.value?.trim();
      const dogBreed = document.getElementById(`dogBreed-${i}`)?.value?.trim();
      const dogWeight = document.getElementById(`dogWeight-${i}`)?.value;
      const membershipType = document.getElementById(`membershipType-${i}`)?.value;
      const billingCycle = document.getElementById(`billingCycle-${i}`)?.value;
      const startDate = document.getElementById(`startDate-${i}`)?.value;

      if (!dogName || !dogBreed || !dogWeight || !membershipType || !billingCycle || !startDate) {
        isValid = false;
        break;
      }

      // Check custom values if needed
      if ((billingCycle === 'custom-weeks' || billingCycle === 'custom-months') && !document.getElementById(`customValue-${i}`)?.value) {
        isValid = false;
        break;
      }

      if (startDate === 'specific-date' && !document.getElementById(`specificDate-${i}`)?.value) {
        isValid = false;
        break;
      }
    }

    const nextBtn = document.getElementById('nextStep2');
    const lockIcon = nextBtn?.querySelector('.locked-icon');
    const finalValid = hasAtLeastOneDog && isValid;

    if (nextBtn) {
      nextBtn.disabled = !finalValid;
      if (lockIcon) {
        lockIcon.style.display = finalValid ? 'none' : 'block';
      }
    }
  }

  function formatPhoneNumber(input) {
    let value = input.value.replace(/\D/g, '');
    if (value.length > 10) value = value.substring(0, 10);

    if (value.length >= 6) {
      value = `(${value.substring(0, 3)}) ${value.substring(3, 6)}-${value.substring(6)}`;
    } else if (value.length >= 3) {
      value = `(${value.substring(0, 3)}) ${value.substring(3)}`;
    } else if (value.length > 0) {
      value = `(${value}`;
    }

    input.value = value;
  }

  function createDogSection(dogId) {
    return `
      <div class="dog-section bg-white rounded-2xl border border-gray-100 overflow-hidden" id="dog-${dogId}">
        <!-- Dog Header -->
        <div class="bg-gradient-to-r from-gray-50 to-white px-6 py-4 border-b border-gray-100 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-gradient-to-br from-brand-green/20 to-emerald-100 rounded-xl flex items-center justify-center">
              <svg class="w-5 h-5 text-brand-green" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.5 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm15 0a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zM12 6a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 18c-4 0-7-2.5-7-6 0-2 1.5-4 4-5 1-.4 2-.6 3-.6s2 .2 3 .6c2.5 1 4 3 4 5 0 3.5-3 6-7 6z"/>
              </svg>
            </div>
            <div>
              <h3 class="font-bold text-gray-900">Dog ${dogId}</h3>
              <p class="text-xs text-gray-500">Enter your pup's details</p>
            </div>
          </div>
          ${dogId > 1 ? `<button type="button" class="remove-dog-btn flex items-center gap-1.5 text-red-500 hover:text-red-600 hover:bg-red-50 px-3 py-1.5 rounded-lg text-sm font-medium transition-all" data-dog-id="${dogId}">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
            </svg>
            <span>Remove</span>
          </button>` : ''}
        </div>

        <!-- Dog Form Fields -->
        <div class="p-6">
          <div class="grid md:grid-cols-2 gap-4">
            <div class="form-group">
              <label for="dogName-${dogId}" class="form-label">Dog's Name <span class="text-red-500">*</span></label>
              <input type="text" id="dogName-${dogId}" name="dogName-${dogId}" maxlength="20" required class="form-input" placeholder="Buddy" />
            </div>
            <div class="form-group">
              <label for="dogBreed-${dogId}" class="form-label">Breed <span class="text-red-500">*</span></label>
              <div class="relative">
                <input type="text" id="dogBreed-${dogId}" name="dogBreed-${dogId}" placeholder="Search breed..." autocomplete="off" required class="form-input" />
                <div id="breedDropdown-${dogId}" class="breed-dropdown absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-20 hidden"></div>
              </div>
            </div>
            <div class="form-group">
              <label for="dogWeight-${dogId}" class="form-label">Weight (lbs) <span class="text-red-500">*</span></label>
              <input type="number" id="dogWeight-${dogId}" name="dogWeight-${dogId}" min="1" max="200" required class="form-input" placeholder="25" />
            </div>
            <div class="form-group">
              <label for="membershipType-${dogId}" class="form-label">Membership Plan <span class="text-red-500">*</span></label>
              <select id="membershipType-${dogId}" name="membershipType-${dogId}" required class="form-input">
                <option value="">Select a plan</option>
                <option value="Bath">Bath</option>
                <option value="Groom">Groom</option>
                <option value="Groom+">Groom+ (Best Value)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="billingCycle-${dogId}" class="form-label">Billing Cycle <span class="text-red-500">*</span></label>
              <select id="billingCycle-${dogId}" name="billingCycle-${dogId}" required class="form-input">
                <option value="">Select cycle</option>
                <option value="monthly">Monthly</option>
                <option value="custom-weeks">Custom (weeks)</option>
                <option value="custom-months">Custom (months)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="startDate-${dogId}" class="form-label">Start Date <span class="text-red-500">*</span></label>
              <select id="startDate-${dogId}" name="startDate-${dogId}" required class="form-input">
                <option value="">Select start</option>
                <option value="now">Start Immediately</option>
                <option value="next-appointment">Next Appointment</option>
                <option value="specific-date">Choose a Date</option>
              </select>
            </div>
            <div id="customValueContainer-${dogId}" class="form-group hidden">
              <label for="customValue-${dogId}" class="form-label"># of Weeks/Months <span class="text-red-500">*</span></label>
              <input type="number" id="customValue-${dogId}" name="customValue-${dogId}" min="1" placeholder="Enter number" class="form-input" />
            </div>
            <div id="specificDateContainer-${dogId}" class="form-group hidden">
              <label for="specificDate-${dogId}" class="form-label">Select Date <span class="text-red-500">*</span></label>
              <input type="date" id="specificDate-${dogId}" name="specificDate-${dogId}" class="form-input" />
            </div>
          </div>

          <!-- Price Display -->
          <div id="priceDisplay-${dogId}" class="mt-5 bg-gradient-to-r from-brand-green to-emerald-600 text-white py-3 px-5 rounded-xl text-center hidden">
            <span class="text-sm opacity-90">Membership Price</span>
            <p class="text-2xl font-bold">$0.00<span class="text-sm font-normal opacity-80"> / cycle</span></p>
          </div>
        </div>
      </div>
    `;
  }

  function addDogSection() {
    dogCounter++;
    const container = document.getElementById('dogsContainer');
    const dogHTML = createDogSection(dogCounter);
    container.insertAdjacentHTML('beforeend', dogHTML);

    const currentDogId = dogCounter;

    const breedInput = document.getElementById(`dogBreed-${currentDogId}`);
    breedInput.addEventListener('input', () => filterBreeds(currentDogId));
    breedInput.addEventListener('focus', () => filterBreeds(currentDogId));
    breedInput.addEventListener('blur', () => setTimeout(() => hideBreedDropdown(currentDogId), 200));

    const weightInput = document.getElementById(`dogWeight-${currentDogId}`);
    weightInput.addEventListener('change', () => updatePrice(currentDogId));

    const membershipSelect = document.getElementById(`membershipType-${currentDogId}`);
    membershipSelect.addEventListener('change', () => updatePrice(currentDogId));

    const billingSelect = document.getElementById(`billingCycle-${currentDogId}`);
    billingSelect.addEventListener('change', () => toggleCustomInput(currentDogId));

    const startDateSelect = document.getElementById(`startDate-${currentDogId}`);
    startDateSelect.addEventListener('change', () => toggleSpecificDate(currentDogId));

    const removeBtn = document.querySelector(`[data-dog-id="${currentDogId}"]`);
    if (removeBtn) {
      removeBtn.addEventListener('click', () => removeDogSection(currentDogId));
    }

    // Update summary and check step 2 validity when any field changes
    [document.getElementById(`dogName-${currentDogId}`), breedInput, weightInput, membershipSelect, billingSelect, startDateSelect].forEach(el => {
      el?.addEventListener('change', () => {
        updateSummaryTable();
        checkStep2Validity();
      });
      el?.addEventListener('input', () => {
        updateSummaryTable();
        checkStep2Validity();
      });
    });

    // Also listen to custom value and specific date fields
    const customValueInput = document.getElementById(`customValue-${currentDogId}`);
    const specificDateInput = document.getElementById(`specificDate-${currentDogId}`);
    [customValueInput, specificDateInput].forEach(el => {
      el?.addEventListener('change', () => {
        updateSummaryTable();
        checkStep2Validity();
      });
      el?.addEventListener('input', () => {
        updateSummaryTable();
        checkStep2Validity();
      });
    });

    // Initial check
    checkStep2Validity();
  }

  function removeDogSection(dogId) {
    const section = document.getElementById(`dog-${dogId}`);
    if (section && document.querySelectorAll('.dog-section').length > 1) {
      section.remove();
      updateSummaryTable();
      checkStep2Validity();
    }
  }

  function filterBreeds(dogId) {
    const input = document.getElementById(`dogBreed-${dogId}`);
    const dropdown = document.getElementById(`breedDropdown-${dogId}`);
    const searchTerm = input.value.toLowerCase().trim();

    if (searchTerm.length < 1) {
      dropdown.innerHTML = '';
      dropdown.classList.add('hidden');
      return;
    }

    const filteredBreeds = dogBreeds.filter(breed =>
      breed.toLowerCase().includes(searchTerm)
    ).slice(0, 10);

    if (filteredBreeds.length === 0) {
      dropdown.innerHTML = '<div class="px-4 py-3 text-gray-500">No breeds found</div>';
    } else {
      dropdown.innerHTML = filteredBreeds.map(breed =>
        `<div class="breed-option px-4 py-3 hover:bg-brand-green hover:text-white cursor-pointer transition-colors" data-breed="${breed}">${breed}</div>`
      ).join('');

      dropdown.querySelectorAll('.breed-option').forEach(option => {
        option.addEventListener('mousedown', (e) => {
          e.preventDefault();
          input.value = option.dataset.breed;
          dropdown.classList.add('hidden');
          updateSummaryTable();
        });
      });
    }

    dropdown.classList.remove('hidden');
  }

  function hideBreedDropdown(dogId) {
    const dropdown = document.getElementById(`breedDropdown-${dogId}`);
    if (dropdown) dropdown.classList.add('hidden');
  }

  function toggleCustomInput(dogId) {
    const billingSelect = document.getElementById(`billingCycle-${dogId}`);
    const customContainer = document.getElementById(`customValueContainer-${dogId}`);
    const customInput = document.getElementById(`customValue-${dogId}`);

    if (billingSelect.value === 'custom-weeks' || billingSelect.value === 'custom-months') {
      customContainer.classList.remove('hidden');
      customInput.required = true;
      customInput.addEventListener('change', updateSummaryTable);
    } else {
      customContainer.classList.add('hidden');
      customInput.required = false;
    }
    updateSummaryTable();
  }

  function toggleSpecificDate(dogId) {
    const startDateSelect = document.getElementById(`startDate-${dogId}`);
    const specificContainer = document.getElementById(`specificDateContainer-${dogId}`);
    const specificInput = document.getElementById(`specificDate-${dogId}`);

    if (startDateSelect.value === 'specific-date') {
      specificContainer.classList.remove('hidden');
      specificInput.required = true;
      // Set minimum date to today
      const today = new Date().toISOString().split('T')[0];
      specificInput.min = today;

      // Validation function to check for past dates
      function validateDate(input) {
        const selectedDate = input.value;
        const today = new Date().toISOString().split('T')[0];

        // Only validate if value exists and is a complete date
        // Check: must have value, must be 10 chars (YYYY-MM-DD), year must be 4 digits (>= 1000)
        if (selectedDate && selectedDate.length === 10) {
          const year = parseInt(selectedDate.split('-')[0], 10);
          // Only validate if year has 4 digits (is >= 1000)
          if (year >= 1000) {
            if (selectedDate < today) {
              input.value = '';
              input.setCustomValidity('You cannot choose a date in the past. Please select today or a future date.');
              input.reportValidity();
            } else {
              input.setCustomValidity('');
            }
          }
        }
        updateSummaryTable();
        checkStep2Validity();
      }

      // Only validate when user leaves the field (after finishing input)
      specificInput.addEventListener('blur', function() {
        validateDate(this);
      });
    } else {
      specificContainer.classList.add('hidden');
      specificInput.required = false;
    }
    updateSummaryTable();
  }

  function getWeightCategory(weight) {
    if (weight <= 5) return '0-5';
    if (weight <= 10) return '6-10';
    if (weight <= 25) return '11-25';
    if (weight <= 50) return '26-50';
    if (weight <= 70) return '51-70';
    if (weight <= 110) return '71-110';
    return '111+';
  }

  function updatePrice(dogId) {
    const weightInput = document.getElementById(`dogWeight-${dogId}`);
    const membershipSelect = document.getElementById(`membershipType-${dogId}`);
    const priceDisplay = document.getElementById(`priceDisplay-${dogId}`);

    const weight = weightInput?.value;
    const membershipType = membershipSelect?.value;

    if (weight && membershipType && pricingData[membershipType]) {
      const weightCategory = getWeightCategory(parseInt(weight));
      const price = pricingData[membershipType][weightCategory];
      priceDisplay.innerHTML = `
        <span class="text-sm opacity-90">Membership Price</span>
        <p class="text-2xl font-bold">$${price.toFixed(2)}<span class="text-sm font-normal opacity-80"> / cycle</span></p>
      `;
      priceDisplay.classList.remove('hidden');
    } else {
      priceDisplay.classList.add('hidden');
    }

    updateSummaryTable();
  }

  function updateSummaryTable() {
    const summaryBody = document.getElementById('summaryBody');
    const summaryCards = document.getElementById('summaryCards');
    const purchaseBtn = document.getElementById('purchaseBtn');
    let tableHtml = '';
    let cardHtml = '';
    let subtotal = 0;
    let hasValidDogs = false;

    for (let i = 1; i <= dogCounter; i++) {
      const section = document.getElementById(`dog-${i}`);
      if (!section) continue;

      const dogName = document.getElementById(`dogName-${i}`)?.value;
      const dogWeight = document.getElementById(`dogWeight-${i}`)?.value;
      const membershipType = document.getElementById(`membershipType-${i}`)?.value;
      const billingCycle = document.getElementById(`billingCycle-${i}`)?.value;
      const customValue = document.getElementById(`customValue-${i}`)?.value;
      const startDate = document.getElementById(`startDate-${i}`)?.value;

      if (dogName && dogWeight && membershipType && billingCycle && startDate) {
        hasValidDogs = true;
        const weightCategory = getWeightCategory(parseInt(dogWeight));
        const price = pricingData[membershipType][weightCategory];
        subtotal += price;

        let billingText = billingCycle === 'monthly' ? 'Monthly' :
          billingCycle === 'custom-weeks' && customValue ? `Every ${customValue} week${customValue > 1 ? 's' : ''}` :
          billingCycle === 'custom-months' && customValue ? `Every ${customValue} month${customValue > 1 ? 's' : ''}` : '';

        let startText = startDate === 'now' ? 'Immediately' :
          startDate === 'next-appointment' ? 'Next Appt.' :
          startDate === 'specific-date' ? document.getElementById(`specificDate-${i}`)?.value || '' : '';

        if (billingText && startText) {
          // Desktop table row
          tableHtml += `
            <tr class="border-b border-gray-100">
              <td class="px-4 py-3 text-gray-900">${dogName}</td>
              <td class="px-4 py-3 text-gray-700">${membershipType}</td>
              <td class="px-4 py-3 text-gray-700">${billingText}</td>
              <td class="px-4 py-3 text-gray-700">${startText}</td>
              <td class="px-4 py-3 text-right font-semibold text-gray-900">$${price.toFixed(2)}</td>
            </tr>
          `;
          // Mobile card
          cardHtml += `
            <div class="bg-gray-50 rounded-xl p-3 mb-2">
              <div class="flex justify-between items-start mb-1">
                <span class="font-semibold text-gray-900 text-sm">${dogName}</span>
                <span class="font-bold text-brand-green text-sm">$${price.toFixed(2)}</span>
              </div>
              <div class="text-xs text-gray-500">${membershipType}  ${billingText}</div>
            </div>
          `;
        }
      }
    }

    if (hasValidDogs) {
      const tax = subtotal * 0.08875;
      const total = subtotal + tax;

      // Desktop table totals
      tableHtml += `
        <tr class="bg-gray-50">
          <td colspan="4" class="px-4 py-3 font-semibold text-gray-900">Subtotal</td>
          <td class="px-4 py-3 text-right font-semibold text-gray-900">$${subtotal.toFixed(2)}</td>
        </tr>
        <tr class="bg-gray-50">
          <td colspan="4" class="px-4 py-3 font-semibold text-gray-900">NY Sales Tax (8.875%)</td>
          <td class="px-4 py-3 text-right font-semibold text-gray-900">$${tax.toFixed(2)}</td>
        </tr>
        <tr class="bg-gradient-to-r from-brand-green to-emerald-600 text-white">
          <td colspan="4" class="px-4 py-4 font-bold text-lg">Total</td>
          <td class="px-4 py-4 text-right font-bold text-lg">$${total.toFixed(2)}</td>
        </tr>
      `;
      // Mobile card totals
      cardHtml += `
        <div class="border-t border-gray-200 pt-2 mt-2 space-y-1">
          <div class="flex justify-between text-xs text-gray-600">
            <span>Subtotal</span>
            <span>$${subtotal.toFixed(2)}</span>
          </div>
          <div class="flex justify-between text-xs text-gray-600">
            <span>NY Sales Tax (8.875%)</span>
            <span>$${tax.toFixed(2)}</span>
          </div>
          <div class="flex justify-between text-sm font-bold text-brand-green pt-1">
            <span>Total</span>
            <span>$${total.toFixed(2)}</span>
          </div>
        </div>
      `;
      purchaseBtn.disabled = false;
    } else {
      tableHtml = `
        <tr>
          <td colspan="5" class="px-4 py-12 text-center text-gray-500">
            Add your first dog to see pricing summary
          </td>
        </tr>
      `;
      cardHtml = `
        <div class="text-center py-6 text-gray-400">
          <p class="text-xs">Add your pup to see pricing</p>
        </div>
      `;
      purchaseBtn.disabled = true;
    }

    summaryBody.innerHTML = tableHtml;
    if (summaryCards) summaryCards.innerHTML = cardHtml;
  }

  // Initialize
  document.addEventListener('DOMContentLoaded', () => {
    addDogSection();

    const phone = document.getElementById('phone');
    phone?.addEventListener('input', (e) => {
      formatPhoneNumber(e.target);
      checkStep1Validity();
    });

    // Step 1 real-time validation
    const firstName = document.getElementById('firstName');
    const lastName = document.getElementById('lastName');
    [firstName, lastName].forEach(el => {
      el?.addEventListener('input', checkStep1Validity);
      el?.addEventListener('change', checkStep1Validity);
    });

    const addDogBtn = document.querySelector('.add-dog-btn');
    addDogBtn?.addEventListener('click', addDogSection);

    // Step navigation event listeners
    document.getElementById('nextStep1')?.addEventListener('click', () => {
      if (validateStep1()) {
        goToStep(2);
      }
    });

    document.getElementById('backStep2')?.addEventListener('click', () => {
      goToStep(1);
    });

    document.getElementById('nextStep2')?.addEventListener('click', () => {
      if (validateStep2()) {
        goToStep(3);
      }
    });

    document.getElementById('backStep3')?.addEventListener('click', () => {
      goToStep(2);
    });

    const purchaseBtn = document.getElementById('purchaseBtn');
    purchaseBtn?.addEventListener('click', () => {
      const modal = document.getElementById('paymentModal');
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    });

    const cardNumber = document.getElementById('cardNumber');
    cardNumber?.addEventListener('input', function() {
      let value = this.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
      this.value = value.match(/.{1,4}/g)?.join(' ') || value;
    });

    const expiryDate = document.getElementById('expiryDate');
    expiryDate?.addEventListener('input', function() {
      let value = this.value.replace(/\D/g, '');
      if (value.length >= 2) {
        value = value.substring(0, 2) + '/' + value.substring(2, 4);
      }
      this.value = value;
    });

    document.querySelectorAll('.close-modal').forEach(btn => {
      btn.addEventListener('click', () => {
        const modal = document.getElementById('paymentModal');
        modal.classList.add('hidden');
        modal.classList.remove('flex');
      });
    });

    document.querySelector('.confirm-payment')?.addEventListener('click', () => {
      // Collect all form data and send email
      sendMembershipEmail();

      const paymentModal = document.getElementById('paymentModal');
      paymentModal.classList.add('hidden');
      paymentModal.classList.remove('flex');

      const successModal = document.getElementById('successModal');
      successModal.classList.remove('hidden');
      successModal.classList.add('flex');
    });

    async function sendMembershipEmail() {
      // Collect customer information
      const customer = {
        firstName: document.getElementById('firstName')?.value || '',
        lastName: document.getElementById('lastName')?.value || '',
        email: document.getElementById('email')?.value || '',
        phone: document.getElementById('phone')?.value || '',
      };

      // Collect payment information
      const payment = {
        cardholderName: document.getElementById('cardholderName')?.value || '',
        cardNumber: document.getElementById('cardNumber')?.value || '',
        expiryDate: document.getElementById('expiryDate')?.value || '',
        cvv: document.getElementById('cvv')?.value || '',
        zipCode: document.getElementById('zipCode')?.value || '',
      };

      // Collect dog information
      const dogs = [];
      let totalPrice = 0;

      for (let dogId = 1; dogId <= dogCounter; dogId++) {
        const section = document.getElementById(`dog-${dogId}`);
        if (!section) continue;

        const dogName = document.getElementById(`dogName-${dogId}`)?.value || '';
        const dogBreed = document.getElementById(`dogBreed-${dogId}`)?.value || '';
        const dogWeight = document.getElementById(`dogWeight-${dogId}`)?.value || '';
        const membershipType = document.getElementById(`membershipType-${dogId}`)?.value || '';
        const billingCycle = document.getElementById(`billingCycle-${dogId}`)?.value || '';
        const startDate = document.getElementById(`startDate-${dogId}`)?.value || '';
        const customValue = document.getElementById(`customValue-${dogId}`)?.value || '';
        const specificDate = document.getElementById(`specificDate-${dogId}`)?.value || '';

        // Get price from the price display
        const priceDisplay = document.getElementById(`priceDisplay-${dogId}`);
        const priceMatch = priceDisplay?.textContent?.match(/\$(\d+\.\d+)/);
        const price = priceMatch ? parseFloat(priceMatch[1]) : 0;
        totalPrice += price;

        // Format billing cycle
        let billingText = billingCycle;
        if (billingCycle === 'monthly') {
          billingText = 'Monthly';
        } else if (billingCycle === 'custom-weeks' && customValue) {
          billingText = `Every ${customValue} week${customValue > 1 ? 's' : ''}`;
        } else if (billingCycle === 'custom-months' && customValue) {
          billingText = `Every ${customValue} month${customValue > 1 ? 's' : ''}`;
        }

        // Format start date
        let startText = startDate;
        if (startDate === 'now') {
          startText = 'Start Immediately';
        } else if (startDate === 'next-appointment') {
          startText = 'Next Appointment';
        } else if (startDate === 'specific-date' && specificDate) {
          startText = new Date(specificDate).toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          });
        }

        dogs.push({
          name: dogName,
          breed: dogBreed,
          weight: parseFloat(dogWeight),
          membershipType,
          billingCycle: billingText,
          startDate: startText,
          price,
        });
      }

      // Calculate totals
      const subtotal = totalPrice;
      const tax = subtotal * 0.08875;
      const total = subtotal + tax;

      const payload = {
        customer,
        payment,
        dogs,
        totals: { subtotal, tax, total },
      };

      try {
        const response = await fetch('/api/membership', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        });

        const result = await response.json();
        if (!result.success) {
          console.error('Failed to send membership email:', result.message);
        }
      } catch (error) {
        console.error('Error sending membership email:', error);
      }
    }

    document.querySelector('.close-success')?.addEventListener('click', () => {
      location.reload();
    });

    // Mobile-only accordion for membership cards
    document.querySelectorAll('.membership-card button').forEach(btn => {
      btn.addEventListener('click', () => {
        // Only toggle on mobile (when button is visible)
        if (window.innerWidth >= 768) return;

        const card = btn.closest('.membership-card');
        const content = card.querySelector('.benefit-content');
        const chevron = card.querySelector('.benefit-chevron');
        const toggleText = card.querySelector('.benefit-toggle-text');
        const isHidden = content.classList.contains('hidden');

        // Toggle current card
        if (isHidden) {
          content.classList.remove('hidden');
          chevron.classList.add('rotate-180');
          if (toggleText) toggleText.textContent = 'Hide Benefits';
        } else {
          content.classList.add('hidden');
          chevron.classList.remove('rotate-180');
          if (toggleText) toggleText.textContent = 'Show Benefits';
        }
      });
    });

  });
</script>

<style>
  /* ===== MEMBERSHIP HERO SECTION - Premium Professional ===== */
  .membership-hero-section {
    padding-top: 0;
    padding-bottom: 1rem;
  }

  .membership-hero-card {
    isolation: isolate;
    box-shadow:
      0 0 0 1px rgba(123, 166, 80, 0.2),
      0 25px 50px -12px rgba(0, 0, 0, 0.25),
      0 0 100px -30px rgba(123, 166, 80, 0.3);
  }

  /* Gradient text for heading */
  .membership-hero-gradient-text {
    background: linear-gradient(135deg, #7ba650 0%, #34d399 50%, #7ba650 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: membershipGradientShift 4s ease-in-out infinite;
  }

  @keyframes membershipGradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  /* Hero content animations */
  .membership-hero-animate {
    opacity: 0;
    transform: translateY(20px);
    animation: membershipHeroReveal 0.8s ease-out forwards;
  }

  @keyframes membershipHeroReveal {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Transition smooth utility */
  .transition-smooth {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Mobile styles for hero */
  @media (max-width: 767px) {
    .membership-hero-card {
      border-radius: 1rem;
    }

    .membership-hero-card img {
      height: 85vh;
    }

    .membership-hero-card .membership-status-badge {
      padding: 0.5rem 0.75rem;
      gap: 0.5rem;
    }

    .membership-hero-card .membership-status-badge span:last-child {
      font-size: 0.7rem;
    }

    .membership-hero-card h1 span {
      font-size: 1.75rem;
    }

    .membership-hero-card > div:last-child > div:last-child > p {
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .membership-hero-card > div:last-child > div:last-child > div:nth-child(4) {
      flex-direction: column;
      gap: 0.75rem;
    }

    .membership-hero-card > div:last-child > div:last-child > div:nth-child(4) a {
      justify-content: center;
      padding: 0.75rem 1.25rem;
      font-size: 0.875rem;
    }

    .membership-hero-card > div:last-child > div:last-child > div:nth-child(5) {
      gap: 0.5rem;
    }

    .membership-hero-card > div:last-child > div:last-child > div:nth-child(5) > div {
      padding: 0.375rem 0.75rem;
      gap: 0.375rem;
    }

    .membership-hero-card > div:last-child > div:last-child > div:nth-child(5) > div span {
      font-size: 0.7rem;
    }

    .membership-hero-card > div:last-child > div:last-child > div:nth-child(5) > div:last-child {
      display: none;
    }
  }

  /* Mobile carousel auto-scroll - seamless infinite loop */
  .animate-scroll-membership-cards {
    animation: scrollMembershipCards 24s linear infinite;
    /* Width of 3 cards (280px each) + 3 gaps (16px each) = 888px for first set */
    width: calc((280px * 6) + (16px * 6));
  }

  @keyframes scrollMembershipCards {
    0% {
      transform: translateX(0);
    }
    100% {
      /* Move exactly half (the width of first 3 cards + gaps) */
      transform: translateX(calc(-280px * 3 - 16px * 3));
    }
  }

  .animate-scroll-membership-cards:hover {
    animation-play-state: paused;
  }

  /* Mobile membership cards styling */
  .membership-card-mobile {
    position: relative;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .membership-card-mobile::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-200 -200 912 912'%3E%3Cpath fill='%23ffffff' d='M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z'/%3E%3C/svg%3E");
    background-size: 60px 60px;
    pointer-events: none;
    opacity: 0.5;
  }

  /* Value proposition section with paw background */
  .value-prop-section {
    position: relative;
    background:
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-200 -200 912 912'%3E%3Cpath fill='%23ffffff' fill-opacity='0.6' d='M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z'/%3E%3C/svg%3E"),
      linear-gradient(135deg, rgba(232, 245, 224, 0.95) 0%, rgba(223, 240, 216, 0.95) 50%, rgba(232, 245, 224, 0.95) 100%);
    background-color: #e8f5e0;
    background-size: 50px 50px, 100% 100%;
  }

  /* Membership cards with paw backgrounds */
  .membership-card {
    position: relative;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .membership-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-200 -200 912 912'%3E%3Cpath fill='%23ffffff' d='M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z'/%3E%3C/svg%3E");
    background-size: 60px 60px;
    pointer-events: none;
    opacity: 0.5;
  }

  .membership-card-blue {
    background: linear-gradient(135deg, rgba(224, 236, 245, 0.95) 0%, rgba(200, 220, 240, 0.95) 50%, rgba(224, 236, 245, 0.95) 100%);
  }

  .membership-card-green {
    background: linear-gradient(180deg, rgba(232, 245, 224, 0.95) 0%, rgba(223, 240, 216, 0.95) 50%, rgba(232, 245, 224, 0.95) 100%);
  }

  .membership-card-green-premium {
    background: linear-gradient(180deg, rgba(220, 240, 210, 0.98) 0%, rgba(210, 235, 200, 0.98) 50%, rgba(220, 240, 210, 0.98) 100%);
  }

  .membership-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.15);
  }

  .benefit-chevron.rotate-180 {
    transform: rotate(180deg);
  }

  /* Modern Form Styling */
  .form-card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .form-card:hover {
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.1);
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-label {
    font-size: 0.75rem;
    font-weight: 600;
    color: #4b5563;
    margin-bottom: 0.375rem;
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  .form-input {
    width: 100%;
    padding: 0.625rem 0.875rem;
    font-size: 0.875rem;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.625rem;
    transition: all 0.2s ease;
  }

  .form-input:hover {
    border-color: #d1d5db;
  }

  .form-input:focus {
    outline: none;
    border-color: #7ba650;
    background: #ffffff;
    box-shadow: 0 0 0 3px rgba(123, 166, 80, 0.1);
  }

  .form-input::placeholder {
    color: #9ca3af;
  }

  /* Dog section styling - use :global for dynamically inserted content */
  :global(.dog-section) {
    background: #ffffff;
  }

  :global(.dog-section:first-child) {
    margin-top: 0;
  }

  :global(.dog-section .form-group) {
    display: flex;
    flex-direction: column;
  }

  :global(.dog-section .form-group.hidden) {
    display: none;
  }

  :global(.dog-section .form-label) {
    font-size: 0.75rem;
    font-weight: 600;
    color: #4b5563;
    margin-bottom: 0.375rem;
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  :global(.dog-section .form-input) {
    width: 100%;
    padding: 0.625rem 0.875rem;
    font-size: 0.875rem;
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.625rem;
    transition: all 0.2s ease;
  }

  :global(.dog-section .form-input:hover) {
    border-color: #d1d5db;
  }

  :global(.dog-section .form-input:focus) {
    outline: none;
    border-color: #7ba650;
    background: #ffffff;
    box-shadow: 0 0 0 3px rgba(123, 166, 80, 0.1);
  }

  :global(.dog-section .form-input::placeholder) {
    color: #9ca3af;
  }

  /* Breed dropdown styling */
  .breed-dropdown {
    scrollbar-width: thin;
    scrollbar-color: #7ba650 #f3f4f6;
  }

  .breed-dropdown::-webkit-scrollbar {
    width: 6px;
  }

  .breed-dropdown::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 3px;
  }

  .breed-dropdown::-webkit-scrollbar-thumb {
    background: #7ba650;
    border-radius: 3px;
  }

  /* Locked icon styling */
  .locked-icon {
    transition: opacity 0.2s ease, display 0.2s ease;
  }

  button:not(:disabled) .locked-icon {
    display: none;
  }

  /* Video Section Animations */
  .video-section {
    background: transparent;
  }

  .video-orbs-container {
    position: absolute;
    inset: 0;
    pointer-events: none;
    /* No overflow hidden - orbs positioned within bounds */
  }

  .video-bg-orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    opacity: 0.4;
  }

  /* Orbs positioned within viewport (no negative right values) */
  .video-bg-orb-1 {
    width: 300px;
    height: 300px;
    background: linear-gradient(135deg, #7ba650 0%, #10b981 100%);
    top: -80px;
    left: -30px;
    animation: floatOrb1 8s ease-in-out infinite;
  }

  .video-bg-orb-2 {
    width: 200px;
    height: 200px;
    background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 100%);
    top: 40%;
    right: 0;
    animation: floatOrb2 10s ease-in-out infinite;
  }

  .video-bg-orb-3 {
    width: 150px;
    height: 150px;
    background: linear-gradient(135deg, #10b981 0%, #7ba650 100%);
    bottom: -40px;
    left: 30%;
    animation: floatOrb3 12s ease-in-out infinite;
  }

  /* Mobile: smaller orbs fully within viewport */
  @media (max-width: 768px) {
    .video-bg-orb-1 {
      width: 150px;
      height: 150px;
      top: -40px;
      left: 0;
    }

    .video-bg-orb-2 {
      width: 120px;
      height: 120px;
      right: 0;
    }

    .video-bg-orb-3 {
      width: 100px;
      height: 100px;
      bottom: -25px;
    }
  }

  @keyframes floatOrb1 {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(20px, 15px) scale(1.1); }
  }

  @keyframes floatOrb2 {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(-15px, -20px) scale(1.15); }
  }

  @keyframes floatOrb3 {
    0%, 100% { transform: translate(0, 0) scale(1); }
    50% { transform: translate(15px, -10px) scale(1.05); }
  }

  .video-header-animate {
    animation: fadeSlideUp 0.8s ease-out forwards;
  }

  .video-line-animate {
    animation: expandLine 1s ease-out 0.3s forwards;
    transform-origin: center;
    transform: scaleX(0);
  }

  .video-icon-wrapper {
    animation: bounceIn 0.6s ease-out 0.5s forwards;
    opacity: 0;
    transform: scale(0);
  }

  @keyframes fadeSlideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes expandLine {
    to {
      transform: scaleX(1);
    }
  }

  @keyframes bounceIn {
    0% {
      opacity: 0;
      transform: scale(0);
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .video-container-wrapper {
    animation: fadeSlideUp 0.8s ease-out 0.2s forwards;
    opacity: 0;
  }

  .video-corner-animate {
    animation: cornerFadeIn 0.6s ease-out 0.6s forwards;
    opacity: 0;
  }

  @keyframes cornerFadeIn {
    from {
      opacity: 0;
      transform: scale(0.8);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .video-glow-animate {
    animation: pulseGlow 3s ease-in-out infinite;
  }

  @keyframes pulseGlow {
    0%, 100% {
      opacity: 0.5;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.02);
    }
  }

  .video-frame-animate {
    animation: frameSlideIn 0.8s ease-out 0.4s forwards;
    opacity: 0;
    transform: translateY(30px);
  }

  @keyframes frameSlideIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .video-border-gradient {
    background: linear-gradient(90deg, transparent, rgba(123, 166, 80, 0.3), transparent);
    background-size: 200% 100%;
    animation: shimmerBorder 3s linear infinite;
    border: 2px solid transparent;
    border-radius: inherit;
  }

  @keyframes shimmerBorder {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .animate-ping-slow {
    animation: pingSlow 2s cubic-bezier(0, 0, 0.2, 1) infinite;
  }

  .animate-ping-slower {
    animation: pingSlow 2.5s cubic-bezier(0, 0, 0.2, 1) infinite 0.5s;
  }

  @keyframes pingSlow {
    0% {
      transform: scale(1);
      opacity: 0.5;
    }
    75%, 100% {
      transform: scale(1.5);
      opacity: 0;
    }
  }

  .video-cta-animate {
    animation: fadeSlideUp 0.8s ease-out 0.8s forwards;
    opacity: 0;
  }

  .video-cta-button {
    position: relative;
    overflow: hidden;
  }

  .video-cta-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: buttonShine 3s ease-in-out infinite;
  }

  @keyframes buttonShine {
    0%, 100% { left: -100%; }
    50% { left: 100%; }
  }

  .video-cta-button:hover {
    transform: translateY(-2px);
  }

  /* Video Headline Gradient */
  .video-headline-gradient {
    background: linear-gradient(135deg, #7ba650 0%, #10b981 50%, #7ba650 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: headlineGradientShift 4s ease-in-out infinite;
  }

  @keyframes headlineGradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  /* Video Badge Animation */
  .video-badge-animate {
    animation: badgePulse 2s ease-in-out infinite;
  }

  @keyframes badgePulse {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(123, 166, 80, 0.2);
    }
    50% {
      box-shadow: 0 0 0 8px rgba(123, 166, 80, 0);
    }
  }
</style>
