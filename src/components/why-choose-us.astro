---
import { Icon } from "astro-icon/components";

const features = [
  {
    title: "Fast Service",
    description: ["1-1.5 hour appointments", "Same/Next day availability", "Efficient, professional care"],
    icon: "lucide:zap",
    gradient: "from-brand-blue to-sky-500",
    bgGlow: "bg-brand-blue/20",
  },
  {
    title: "Smart Reminders",
    description: ["Appointment reminders", "Never miss a groom day", "Text & call notifications"],
    icon: "lucide:bell",
    gradient: "from-brand-green to-emerald-500",
    bgGlow: "bg-brand-green/20",
  },
];
---

<section class="py-6 md:py-10">
  <!-- Desktop: Video on left (3 cols) + 2 feature cards on right (1 col) -->
  <div class="hidden md:grid md:grid-cols-4 gap-5 items-stretch" id="why-choose-us-desktop">
    <!-- Video spanning 3 columns with premium styling -->
    <div class="col-span-3 relative group" id="video-container">
      <!-- Outer glow effect -->
      <div class="absolute -inset-1 bg-gradient-to-r from-brand-green/30 via-emerald-500/20 to-brand-blue/30 rounded-[1.75rem] blur-lg opacity-60 group-hover:opacity-100 transition-opacity duration-500"></div>

      <div class="relative overflow-hidden rounded-2xl bg-gradient-to-br from-white/90 to-white/70 backdrop-blur-xl border border-white/60 shadow-xl" id="video-wrapper">
        <!-- Decorative corner accents -->
        <div class="absolute top-0 left-0 w-20 h-20 bg-gradient-to-br from-brand-green/10 to-transparent rounded-br-3xl"></div>
        <div class="absolute bottom-0 right-0 w-24 h-24 bg-gradient-to-tl from-brand-blue/10 to-transparent rounded-tl-3xl"></div>

        <video
          class="w-full h-auto relative z-10"
          autoplay
          muted
          loop
          playsinline
          id="feature-video"
        >
          <source src="/videos/christmas-catalog.mp4" type="video/mp4">
        </video>

      </div>
    </div>

    <!-- Features stacked vertically on the right -->
    <div class="col-span-1 flex flex-col gap-4" id="feature-cards-container">
      {features.map((item, index) => (
        <div class="feature-card-premium group relative flex-1">
          <!-- Animated gradient border -->
          <div class="absolute -inset-[1px] bg-gradient-to-br from-white/80 via-gray-200/50 to-white/80 rounded-2xl opacity-100 group-hover:opacity-0 transition-opacity duration-500"></div>
          <div class={`absolute -inset-[1px] bg-gradient-to-br ${item.gradient} rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500`}></div>

          <!-- Card content -->
          <div class="relative h-full overflow-hidden rounded-2xl bg-white/95 backdrop-blur-xl p-5 flex flex-col">
            <!-- Background glow on hover -->
            <div class={`absolute top-0 right-0 w-32 h-32 ${item.bgGlow} rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 -translate-y-1/2 translate-x-1/2`}></div>

            <!-- Floating particles -->
            <div class="absolute inset-0 overflow-hidden pointer-events-none">
              <div class={`absolute top-4 right-8 w-1 h-1 ${item.bgGlow} rounded-full opacity-0 group-hover:opacity-100 animate-float-1`}></div>
              <div class={`absolute bottom-8 right-4 w-1.5 h-1.5 ${item.bgGlow} rounded-full opacity-0 group-hover:opacity-100 animate-float-2`}></div>
            </div>

            <div class="flex items-start gap-4 relative z-10">
              <!-- Icon with gradient background -->
              <div class={`flex-shrink-0 w-12 h-12 bg-gradient-to-br ${item.gradient} rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 group-hover:rotate-3 transition-all duration-500`}>
                <Icon class="text-white w-6 h-6" name={item.icon} />
              </div>

              <div class="flex-1 min-w-0">
                <h3 class="font-bold text-base text-gray-900 mb-2 group-hover:text-brand-green transition-colors duration-300">{item.title}</h3>
                <ul class="text-gray-600 text-xs leading-relaxed space-y-1">
                  {item.description.map((line) => (
                    <li class="flex items-start gap-2">
                      <Icon name="lucide:check" class="w-3.5 h-3.5 text-brand-green flex-shrink-0 mt-0.5" />
                      <span>{line}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>

            <!-- Bottom shine effect -->
            <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/80 to-transparent"></div>
          </div>
        </div>
      ))}
    </div>
  </div>

  <!-- Mobile: Video on top + features below -->
  <div class="md:hidden">
    <!-- Full-width video with premium styling -->
    <div class="relative group">
      <div class="absolute -inset-1 bg-gradient-to-r from-brand-green/20 to-brand-blue/20 rounded-[1.5rem] blur-md opacity-60"></div>

      <div class="relative overflow-hidden rounded-2xl bg-white/90 backdrop-blur-xl border border-white/60 shadow-xl">
        <video
          class="w-full h-auto"
          autoplay
          muted
          loop
          playsinline
        >
          <source src="/videos/christmas-catalog.mp4" type="video/mp4">
        </video>
      </div>
    </div>

    <!-- Features below video -->
    <div class="flex flex-col gap-3 mt-5">
      {features.map((item, index) => (
        <div class="relative group">
          <!-- Gradient border effect -->
          <div class={`absolute -inset-[1px] bg-gradient-to-r ${item.gradient} rounded-xl opacity-0 group-active:opacity-100 transition-opacity duration-300`}></div>

          <div class="relative overflow-hidden rounded-xl bg-white/95 backdrop-blur-xl border border-gray-100 shadow-lg p-4">
            <!-- Background accent -->
            <div class={`absolute top-0 right-0 w-20 h-20 ${item.bgGlow} rounded-full blur-2xl opacity-30 -translate-y-1/2 translate-x-1/2`}></div>

            <div class="flex items-start gap-3 relative z-10">
              <div class={`flex-shrink-0 w-11 h-11 bg-gradient-to-br ${item.gradient} rounded-xl flex items-center justify-center shadow-md`}>
                <Icon class="text-white w-5 h-5" name={item.icon} />
              </div>
              <div class="flex-1 min-w-0">
                <h3 class="font-bold text-sm text-gray-900 mb-1.5">{item.title}</h3>
                <ul class="text-gray-600 text-xs leading-relaxed space-y-0.5">
                  {item.description.map((line) => (
                    <li class="flex items-start gap-1.5">
                      <Icon name="lucide:check" class="w-3 h-3 text-brand-green flex-shrink-0 mt-0.5" />
                      <span>{line}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  /* Premium card hover effect */
  .feature-card-premium {
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .feature-card-premium:hover {
    transform: translateY(-4px);
  }

  /* Floating particle animations */
  @keyframes float-1 {
    0%, 100% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-10px) translateX(5px); }
  }

  @keyframes float-2 {
    0%, 100% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-8px) translateX(-5px); }
  }

  .animate-float-1 {
    animation: float-1 3s ease-in-out infinite;
  }

  .animate-float-2 {
    animation: float-2 4s ease-in-out infinite 0.5s;
  }
</style>

