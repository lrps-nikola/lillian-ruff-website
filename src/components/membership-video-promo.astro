---
import { Icon } from "astro-icon/components";
---

<section class="py-12 md:py-16 mx-4 md:mx-8 lg:mx-16 my-8 md:my-12 rounded-3xl membership-promo-glass-section overflow-hidden relative">
  <!-- Animated decorative elements -->
  <div class="absolute top-6 right-6 md:top-10 md:right-10 animate-float-slow">
    <div class="relative">
      <div class="absolute inset-0 bg-brand-green/20 rounded-full blur-xl scale-150"></div>
      <Icon name="lucide:crown" class="w-10 h-10 md:w-14 md:h-14 text-brand-green/40 relative z-10" />
    </div>
  </div>
  <div class="absolute bottom-6 left-6 md:bottom-10 md:left-10 animate-float-delayed hidden md:block">
    <div class="relative">
      <div class="absolute inset-0 bg-brand-blue/20 rounded-full blur-xl scale-150"></div>
      <Icon name="lucide:heart" class="w-8 h-8 md:w-12 md:h-12 text-brand-blue/40 relative z-10" />
    </div>
  </div>
  <div class="absolute top-1/2 left-1/4 -translate-y-1/2 hidden lg:block animate-pulse-slow">
    <Icon name="lucide:sparkles" class="w-6 h-6 text-brand-green/20" />
  </div>
  <div class="absolute bottom-1/4 right-1/4 hidden lg:block animate-float-slow">
    <Icon name="lucide:star" class="w-5 h-5 text-brand-blue/25" />
  </div>

  <div class="max-w-7xl mx-auto px-6 md:px-10">
    <div class="flex flex-col lg:grid lg:grid-cols-5 gap-8 lg:gap-12 items-center">
      <!-- Headline Section (Mobile: 1st, Desktop: smaller right column) -->
      <div class="text-gray-800 relative z-10 order-1 lg:order-2 lg:col-span-2">
        <!-- Badge with shine effect - Desktop only -->
        <div class="hidden lg:inline-flex items-center gap-2 bg-gradient-to-r from-white/90 to-white/70 backdrop-blur-md px-5 py-2.5 rounded-full mb-5 shadow-lg border border-white/50 shine-badge overflow-hidden">
          <div class="w-6 h-6 bg-gradient-to-br from-brand-green to-brand-blue rounded-full flex items-center justify-center">
            <Icon name="lucide:crown" class="w-3.5 h-3.5 text-white" />
          </div>
          <span class="text-sm font-bold membership-gradient-text tracking-wide">Grooming Memberships</span>
        </div>

        <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold mb-2 lg:mb-5 leading-tight">
          <span class="text-gray-900">Save More with</span>
          <br class="hidden sm:block" />
          <span class="membership-gradient-text">Membership Plans</span>
        </h2>

        <!-- CTA Button - Hidden on mobile -->
        <a
          href="/memberships#become-member"
          class="hidden lg:inline-flex group items-center gap-3 membership-cta-button text-white px-8 py-4 rounded-full font-bold text-base shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden"
        >
          <span class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/25 to-white/0 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-700"></span>
          <Icon name="lucide:crown" class="w-5 h-5 relative z-10" />
          <span class="relative z-10">Become a Member</span>
          <Icon name="lucide:arrow-right" class="w-5 h-5 transition-transform duration-300 group-hover:translate-x-1 relative z-10" />
        </a>

        <!-- Trust indicators - Hidden on mobile -->
        <div class="hidden lg:flex items-center gap-6 mt-8 pt-6 border-t border-brand-green/10">
          <div class="flex items-center gap-2">
            <Icon name="lucide:users" class="w-4 h-4 text-brand-green" />
            <span class="text-xs text-gray-500">500+ Happy Members</span>
          </div>
          <div class="flex items-center gap-2">
            <Icon name="lucide:repeat" class="w-4 h-4 text-brand-blue" />
            <span class="text-xs text-gray-500">Cancel Anytime</span>
          </div>
        </div>
      </div>

      <!-- Video Container (Mobile: 2nd, Desktop: larger left column) -->
      <div class="relative order-2 lg:order-1 lg:col-span-3 group w-full">
        <!-- Glow behind video -->
        <div class="absolute inset-0 bg-gradient-to-br from-brand-green/30 via-brand-blue/20 to-brand-blue/30 rounded-3xl blur-2xl scale-95 opacity-60 group-hover:opacity-80 transition-opacity duration-500"></div>

        <!-- Video container -->
        <div class="relative z-10 rounded-2xl overflow-hidden shadow-2xl bg-black aspect-video cursor-pointer" id="promo-video-container">
          <!-- Thumbnail with Play Button -->
          <div id="promo-video-thumbnail" class="absolute inset-0 z-10">
            <img
              src="https://img.youtube.com/vi/zXfWBVMD0wU/maxresdefault.jpg"
              alt="Membership Video Thumbnail"
              class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-black/20 group-hover:from-black/70 group-hover:via-black/40 transition-all duration-500"></div>

            <!-- Play Button with Pulse Animation -->
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="relative">
                <!-- Pulse Rings -->
                <div class="absolute inset-0 w-20 h-20 md:w-24 md:h-24 -m-2 md:-m-3">
                  <div class="absolute inset-0 bg-white/30 rounded-full animate-ping-slow"></div>
                  <div class="absolute inset-2 bg-white/20 rounded-full animate-ping-slower"></div>
                </div>
                <!-- Play Button -->
                <div class="relative w-16 h-16 md:w-20 md:h-20 bg-gradient-to-br from-brand-green to-brand-blue rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 transition-all duration-300">
                  <Icon name="lucide:play" class="w-8 h-8 md:w-10 md:h-10 text-white ml-1" />
                </div>
              </div>
            </div>

            <!-- Watch Now Text -->
            <div class="absolute bottom-4 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:-translate-y-1">
              <span class="bg-white/90 backdrop-blur-sm text-gray-900 text-xs font-semibold px-3 py-1.5 rounded-full shadow-lg">
                Watch 1-Min Video
              </span>
            </div>
          </div>

          <!-- YouTube Iframe (hidden until clicked) -->
          <iframe
            id="promo-youtube-video"
            class="absolute inset-0 w-full h-full hidden"
            src=""
            title="Lillian Ruff Pet Spa Membership"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>

      </div>

      <!-- Mobile-only content section (shows after video) -->
      <div class="md:hidden text-gray-800 relative z-10 order-3">
        <!-- CTA Button - Mobile -->
        <a
          href="/memberships#become-member"
          class="group inline-flex items-center gap-3 membership-cta-button text-white px-8 py-4 rounded-full font-bold text-base shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 relative overflow-hidden"
        >
          <span class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/25 to-white/0 translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-700"></span>
          <Icon name="lucide:crown" class="w-5 h-5 relative z-10" />
          <span class="relative z-10">Become a Member</span>
          <Icon name="lucide:arrow-right" class="w-5 h-5 transition-transform duration-300 group-hover:translate-x-1 relative z-10" />
        </a>

        <!-- Trust indicators - Mobile -->
        <div class="flex items-center gap-6 mt-6 pt-6 border-t border-brand-green/10">
          <div class="flex items-center gap-2">
            <Icon name="lucide:users" class="w-4 h-4 text-brand-green" />
            <span class="text-xs text-gray-500">500+ Happy Members</span>
          </div>
          <div class="flex items-center gap-2">
            <Icon name="lucide:repeat" class="w-4 h-4 text-brand-blue" />
            <span class="text-xs text-gray-500">Cancel Anytime</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const videoContainer = document.getElementById('promo-video-container');
    const videoThumbnail = document.getElementById('promo-video-thumbnail');
    const youtubeVideo = document.getElementById('promo-youtube-video');

    if (videoContainer && videoThumbnail && youtubeVideo) {
      videoContainer.addEventListener('click', () => {
        videoThumbnail.classList.add('hidden');
        youtubeVideo.classList.remove('hidden');
        youtubeVideo.setAttribute('src', 'https://www.youtube.com/embed/zXfWBVMD0wU?autoplay=1&rel=0');
      });
    }
  });
</script>

<style>
  .membership-promo-glass-section {
    position: relative;
    z-index: 1;
    background:
      /* Paw prints pattern overlay */
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-200 -200 912 912'%3E%3Cpath fill='%23ffffff' fill-opacity='0.5' d='M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z'/%3E%3C/svg%3E"),
      /* Gradient from light green (top) to light blue (bottom) - matching adjacent sections */
      linear-gradient(180deg, #e8f5e0 0%, #dff0d8 25%, #d0e8e4 50%, #c8dcf0 75%, #e0ecf5 100%);
    background-color: #e0f0e8;
    background-size: 60px 60px, 100% 100%;
    box-shadow:
      0 0 80px rgba(123, 166, 80, 0.15),
      0 0 80px rgba(7, 86, 173, 0.1),
      0 25px 50px -12px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.6),
      inset 0 -1px 0 rgba(0, 0, 0, 0.05);
    border: none;
  }

  /* Gradient border with rounded corners using pseudo-element */
  .membership-promo-glass-section::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 1.5rem;
    padding: 1px;
    background: linear-gradient(180deg, rgba(123, 166, 80, 0.3) 0%, rgba(123, 166, 80, 0.2) 30%, rgba(7, 86, 173, 0.2) 70%, rgba(7, 86, 173, 0.3) 100%);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* Gradient text */
  .membership-gradient-text {
    background: linear-gradient(135deg, #7ba650 0%, #10b981 40%, #0756ad 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* CTA button gradient */
  .membership-cta-button {
    background: linear-gradient(135deg, #7ba650 0%, #10b981 50%, #0756ad 100%);
    background-size: 200% 100%;
    background-position: left center;
  }

  .membership-cta-button:hover {
    background-position: right center;
  }

  /* Floating animations */
  @keyframes float-slow {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-10px) rotate(5deg); }
  }

  @keyframes float-delayed {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-8px) rotate(-5deg); }
  }

  @keyframes pulse-slow {
    0%, 100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 0.4; transform: scale(1.1); }
  }

  @keyframes bounce-subtle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }

  @keyframes shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  @keyframes ping-slow {
    0% { transform: scale(1); opacity: 0.5; }
    75%, 100% { transform: scale(1.5); opacity: 0; }
  }

  .animate-float-slow {
    animation: float-slow 6s ease-in-out infinite;
  }

  .animate-float-delayed {
    animation: float-delayed 7s ease-in-out infinite;
    animation-delay: 1s;
  }

  .animate-pulse-slow {
    animation: pulse-slow 4s ease-in-out infinite;
  }

  .animate-bounce-subtle {
    animation: bounce-subtle 3s ease-in-out infinite;
  }

  .animate-ping-slow {
    animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite;
  }

  .animate-ping-slower {
    animation: ping-slow 2.5s cubic-bezier(0, 0, 0.2, 1) infinite 0.5s;
  }

  /* Shine effect on badge */
  .shine-badge::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    animation: shine 3s ease-in-out infinite;
  }

  /* Feature cards hover effect */
  .feature-card {
    position: relative;
  }
  .feature-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 1rem;
    padding: 1px;
    background: linear-gradient(135deg, rgba(255,255,255,0.8), rgba(255,255,255,0.2));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* Mobile responsive adjustments */
  @media (max-width: 767px) {
    .membership-promo-glass-section {
      background-size: 40px 40px, 100% 100%;
    }
  }
</style>